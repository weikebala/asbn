/*
* A JavaScript implementation of the RSA Data Security, Inc. MD5 Message
* Digest Algorithm, as defined in RFC 1321.
* Version 2.2 Copyright (C) Paul Johnston 1999 - 2009
* Other contributors: Greg Holt, Andrew Kepert, Ydnar, Lostinet
* Distributed under the BSD License
* See http://pajhome.org.uk/crypt/md5 for more info.
*/

//     Underscore.js 1.8.3
//     http://underscorejs.org
//     (c) 2009-2015 Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
//     Underscore may be freely distributed under the MIT license.

!function(a,b){function c(d,e){var f=this;return!f instanceof c?new c(d,e):(f.$el=a(d),f._init(d,e),b)}function d(a,b){var c=b?b===!0?this:b:d.prototype;if(X(a))for(var e in a)c[e]=f(a[e])}function e(a,b){var c=b?b===!0?this:b:e.prototype;if(X(a))for(var d in a){if(!a[d])return;c[d]=a[d]}}function f(b){switch(a.type(b)){case"function":return b;case"array":return function(a){return b[0].test(a.value)||b[1]||!1};case"regexp":return function(a){return b.test(a.value)}}}function g(b){var c="";return a.map(b.split(" "),function(a){c+=","+("#"===a.charAt(0)?a:'[name="'+a+'"]')}),c.substring(1)}function h(b){var c;if(b&&b.tagName){switch(b.tagName){case"INPUT":case"SELECT":case"TEXTAREA":case"BUTTON":case"FIELDSET":c=b.form||a(b).closest("."+v);break;case"FORM":c=b;break;default:c=a(b).closest("."+v)}return a(c).data(q)||a(c)[q]().data(q)}}function i(a){var b,c=a.currentTarget;c.form&&null===Z(c.form,J)&&(b=h(c),b?(b._parse(c),b["_"+a.type](a)):Z(c,D,null))}function j(c,d){var e=a.trim(Z(c,D+"-"+d));if(e)return e=Function("return "+e)(),e?f(e):b}function k(a,b,c,d){var e=b.msg,f=b._r;return X(e)&&(e=e[f]),W(e)||(e=Z(a,E+"-"+f)||Z(a,E)||c||(d?W(d)?d:d[f]:"")),e}function l(a){var b;return a&&(b=P.exec(a)),b?b[1]:""}function m(a){return"INPUT"===a.tagName&&"checkbox"===a.type||"radio"===a.type}function n(a){return Date.parse(a.replace(/\.|\-/g,"/"))}var o,p,q="validator",r="."+q,s=".rule",t=".field",u=".form",v="nice-"+q,w="n-ok",x="n-error",y="n-tip",z="n-loading",A="msg-box",B="aria-required",C="aria-invalid",D="data-rule",E="data-msg",F="data-tip",G="data-ok",H="data-target",I="data-inputstatus",J="novalidate",K=":verifiable",L=/(!?)\s?(\w+)(?:\[\s*(.*?\]?)\s*\]|\(\s*(.*?\)?)\s*\))?\s*(;|\||&)?/g,M=/(\w+)(?:\[\s*(.*?\]?)\s*\]|\(\s*(.*?\)?)\s*\))?/,N=/(?:([^:;\(\[]*):)?(.*)/,O=/[^\x00-\xff]/g,P=/^.*(top|right|bottom|left).*$/,Q=/(?:(post|get):)?(.+)/i,R=/<|>/g,S=a.noop,T=a.proxy,U=a.isFunction,V=a.isArray,W=function(a){return"string"==typeof a},X=function(a){return a&&"[object Object]"===Object.prototype.toString.call(a)},Y=!window.XMLHttpRequest,Z=function(a,c,d){return d===b?a.getAttribute(c):(null===d?a.removeAttribute(c):a.setAttribute(c,""+d),b)},$=window.console||{log:S,info:S},_={debug:0,timely:1,theme:"default",ignore:"",focusInvalid:!0,beforeSubmit:S,validClass:"n-valid",invalidClass:"n-invalid",msgWrapper:"span",msgMaker:function(a){var b,c={error:x,ok:w,tip:y,loading:z}[a.type];return b='<span class="msg-wrap '+c+'" role="alert">',b+=a.arrow+a.icon+'<span class="n-msg">'+a.msg+"</span>",b+="</span>"},msgIcon:'<span class="n-icon"></span>',msgArrow:"",msgClass:"",defaultMsg:"{0} is not valid.",loadingMsg:"Validating..."},ab={"default":{formClass:"n-default",msgClass:"n-right",showOk:""}};a.fn[q]=function(b){var d=this,e=arguments;return d.is(":input")?d:(!d.is("form")&&(d=this.find("form")),!d.length&&(d=this),d.each(function(){var d=a(this).data(q);if(d)if(W(b)){if("_"===b.charAt(0))return;d[b].apply(d,Array.prototype.slice.call(e,1))}else b&&(d._reset(!0),d._init(this,b));else new c(this,b)}),this)},a.fn.isValid=function(a,b){var c,d,e=h(this[0]),f=U(a);return e?(e.checkOnly=!!b,d=e.options,c=e._multiValidate(this.is(":input")?this:this.find(K),function(b){b||!d.focusInvalid||e.checkOnly||e.$el.find(":input["+C+"]:first").focus(),f&&a.call(null,b),e.checkOnly=!1}),f?this:c):!0},a.expr[":"].verifiable=function(a){var b=a.nodeName.toLowerCase();return("input"===b&&!{submit:1,button:1,reset:1,image:1}[a.type]||"select"===b||"textarea"===b)&&a.disabled===!1},c.prototype={_init:function(c,f){var h,i,j,k=this;if(U(f)&&(f={valid:f}),f=f||{},j=Z(c,"data-"+q+"-option"),j=j&&"{"===j.charAt(0)?Function("return "+j)():{},i=ab[f.theme||j.theme||_.theme],h=k.options=a.extend({},_,i,j,k.options,f),k.rules=new d(h.rules,!0),k.messages=new e(h.messages,!0),k.elements=k.elements||{},k.deferred={},k.errors={},k.fields={},k._initFields(h.fields),V(h.groups)&&a.map(h.groups,function(c){return W(c.fields)&&U(c.callback)?(c.$elems=k.$el.find(g(c.fields)),a.map(c.fields.split(" "),function(a){k.fields[a]=k.fields[a]||{},k.fields[a].group=c}),b):null}),k.msgOpt={type:"error",pos:l(h.msgClass),wrapper:h.msgWrapper,cls:h.msgClass,style:h.msgStyle,icon:h.msgIcon,arrow:h.msgArrow,show:h.msgShow,hide:h.msgHide},k.isAjaxSubmit=!1,h.valid||!a.trim(Z(c,"action")))k.isAjaxSubmit=!0;else{var m=a[a._data?"_data":"data"](c,"events");m&&m.valid&&a.map(m.valid,function(a){return-1!==a.namespace.indexOf("form")?1:null}).length&&(k.isAjaxSubmit=!0)}k.$el.data(q)||(k.$el.data(q,k).addClass(v+" "+h.formClass).on("submit"+r+" validate"+r,T(k,"_submit")).on("reset"+r,T(k,"_reset")).on("showtip"+r,T(k,"_showTip")).on("focusin"+r+" click"+r+" showtip"+r,K,T(k,"_focusin")).on("focusout"+r+" validate"+r,K,T(k,"_focusout")),h.timely>=2&&k.$el.on("keyup"+r+" paste"+r,K,T(k,"_focusout")).on("click"+r,":radio,:checkbox",T(k,"_focusout")).on("change"+r,'select,input[type="file"]',T(k,"_focusout")),k._novalidate=Z(c,J),Z(c,J,J))},_initFields:function(b){var c=this;X(b)&&a.each(b,function(a,b){if(null===b){var d=c.elements[a];d&&c._resetElement(d,!0),delete c.fields[a]}else c.fields[a]=W(b)?{rule:b}:b}),c.$el.find(K).each(function(){c._parse(this)})},_parse:function(a){var b,c=this,d=a.name,e=Z(a,D);e&&Z(a,D,null),(a.id&&"#"+a.id in c.fields||!a.name)&&(d="#"+a.id),d&&(b=c.fields[d]||{},b.key=d,b.old={},b.rule=b.rule||e||"",b.rule&&(b.rule.match(/match|checked/)&&(b.must=!0),-1!==b.rule.indexOf("required")&&(b.required=!0,Z(a,B,!0)),("timely"in b&&!b.timely||!c.options.timely)&&Z(a,"notimely",!0),W(b.target)&&Z(a,H,b.target),W(b.tip)&&Z(a,F,b.tip),c.fields[d]=c._parseRule(b)))},_parseRule:function(a){var c=N.exec(a.rule),d=this.options;if(c)return a._i=0,c[1]&&(a.display=c[1]),!a.display&&d.display&&(a.display=d.display),c[2]&&(a.rules=[],c[2].replace(L,function(){var c=arguments;c[3]=c[3]||c[4],a.rules.push({not:"!"===c[1],method:c[2],params:c[3]?c[3].split(", "):b,or:"|"===c[5]})})),a},_multiValidate:function(c,d){var e=this,f=e.options;return e.verifying=!0,e.isValid=!0,f.ignore&&(c=c.not(f.ignore)),c.each(function(a,c){var d=e.getField(c);return d&&(e._validate(c,d),!e.isValid&&f.stopOnError)?!1:b}),a.when.apply(null,a.map(e.deferred,function(a){return a})).done(function(){d.call(e,e.isValid),e.verifying=!1}),a.isEmptyObject(e.deferred)?e.isValid:b},_submit:function(b){var c=this,d=c.options,e=b.target,f="submit"===b.type;b.preventDefault(),p&&~(p=!1)||c.submiting||"validate"===b.type&&c.$el[0]!==e||d.beforeSubmit.call(c,e)===!1||(d.debug&&$.log("\n"+b.type),c._reset(),c.submiting=!0,c._multiValidate(c.$el.find(K),function(b){var g,h=b||2===d.debug?"valid":"invalid";b||(d.focusInvalid&&c.$el.find(":input["+C+'="true"]:first').focus(),g=a.map(c.errors,function(a){return a})),c.submiting=!1,U(d[h])&&d[h].call(c,e,g),c.$el.trigger(h+u,[e,g]),b&&!c.isAjaxSubmit&&f&&(p=!0,o&&o.name&&c.$el.append('<input type="hidden" name="'+o.name+'" value="'+a(o).val()+'">'),e.submit())}))},_reset:function(a){var b=this;b.errors={},a&&b.$el.find(K).each(function(a,c){b._resetElement(c)})},_resetElement:function(b,c){var d=this.options;a(b).removeClass(d.validClass+" "+d.invalidClass),this.hideMsg(b),c&&Z(b,B,null)},_focusin:function(b){var c,d=this,e=d.options,f=b.target;d.verifying||("showtip"!==b.type&&"error"===Z(f,I)&&e.focusCleanup&&(a(f).removeClass(e.invalidClass),d.hideMsg(f)),c=Z(f,F),c&&d.showMsg(f,{type:"tip",msg:c}))},_focusout:function(b){var c,d,e=this,f=e.options,g=b.target,h=b.type,i={click:1,change:1,paste:1},j=0;if(!i[h]){if("validate"===h)d=!0;else{if(Z(g,"notimely"))return;if(f.timely>=2&&"keyup"!==h)return}if(f.ignore&&a(g).is(f.ignore))return;if("keyup"===h){var k=b.keyCode,l={8:1,9:1,16:1,32:1,46:1};if(9===k&&!g.value)return;if(48>k&&!l[k])return;j=f.timely>=100?f.timely:500}}c=e.getField(g),c&&(j?(c._t&&clearTimeout(c._t),c._t=setTimeout(function(){e._validate(g,c,d)},j)):e._validate(g,c,d))},_showTip:function(a){var b=this;b.$el[0]===a.target&&b.$el.find(K+"["+F+"]").each(function(){b.showMsg(this,{msg:Z(this,F),type:"tip"})})},_validatedField:function(b,c,d){var e=this,f=e.options,g=d.isValid=c.isValid=!!d.isValid,h=g?"valid":"invalid";d.key=c.key,d.rule=c._r,g?d.type="ok":(e.submiting&&(e.errors[c.key]=d.msg),e.isValid=!1),c.old.value=b.value,c.old.id=b.id,e.elements[c.key]=d.element=b,e.$el[0].isValid=g?e.isFormValid():g,U(c[h])&&c[h].call(e,b,d),a(b).attr(C,g?null:!0).removeClass(g?f.invalidClass:f.validClass).addClass(d.skip?"":g?f.validClass:f.invalidClass).trigger(h+t,[d,e]),e.$el.triggerHandler("validation",[d,e]),e.checkOnly||(c.msgMaker||f.msgMaker)&&e[d.showOk||d.msg?"showMsg":"hideMsg"](b,d,c)},_validatedRule:function(c,d,e,f){d=d||j.getField(c),f=f||{};var g,h,i,j=this,l=j.options,m=d._r,n=!1;if(null===e)return j._validatedField(c,d,{isValid:!0,skip:!0}),b;if(e===!0||e===b||""===e?n=!0:W(e)?g=e:X(e)&&(e.error?g=e.error:(g=e.ok,n=!0)),d.rules&&(h=d.rules[d._i],h.not&&(g=b,n="required"===m||!n),h.or))if(n)for(;d._i<d.rules.length&&d.rules[d._i].or;)d._i++;else i=!0;i||(n?(f.isValid=n,l.showOk!==!1&&(W(g)||(W(d.ok)?g=d.ok:W(Z(c,G))?g=Z(c,G):W(l.showOk)&&(g=l.showOk)),W(g)&&(f.showOk=n,f.msg=g)),a(c).trigger("valid"+s,[m,f.msg])):(f.msg=(k(c,d,g,j.messages[m])||_.defaultMsg).replace("{0}",j._getDisplay(c,d.display||"")),a(c).trigger("invalid"+s,[m,f.msg]))),l.debug&&$.log("   "+d._i+": "+m+" => "+(n||f.msg||n)),i||n&&d._i<d.rules.length-1?(d._i++,j._checkRule(c,d)):(d._i=0,j._validatedField(c,d,f))},_checkRule:function(c,d){var e,f,g=this,h=d.key,i=d.rules[d._i],k=i.method,l=i.params;g.submiting&&g.deferred[h]||(f=d.old,d._r=k,e=!d.must&&f.ret!==b&&f.rule===i&&f.id===c.id&&c.value&&f.value===c.value?f.ret:(j(c,k)||g.rules[k]||S).call(g,c,l,d),X(e)&&U(e.then)?(g.deferred[h]=e,!g.checkOnly&&g.showMsg(c,{type:"loading",msg:g.options.loadingMsg},d),e.then(function(e,h,j){var k,l=j.responseText,m=d.dataFilter||g.options.dataFilter;"json"===this.dataType?l=e:"{"===l.charAt(0)&&(l=a.parseJSON(l)||{}),U(m)||(m=function(a){return W(a)||X(a)&&("error"in a||"ok"in a)?a:b}),k=m(l),k===b&&(k=m(l.data)),f.rule=i,f.ret=k,g._validatedRule(c,d,k)},function(a,b){g._validatedRule(c,d,b)}).always(function(){delete g.deferred[h]}),d.isValid=b):g._validatedRule(c,d,e))},_validate:function(c,d){if(!c.disabled&&null===Z(c,J)){var e,f=this,g={},h=d.group,i=d.isValid=!0;if(d.rules||f._parse(c),f.options.debug&&$.info(d.key),h&&(e=h.callback.call(f,h.$elems),e!==b&&(f.hideMsg(h.target,{},d),e===!0?e=b:(d._i=0,d._r="group",i=!1,f.hideMsg(c,{},d),a.extend(g,h)))),i&&!d.required&&!d.must&&!c.value){if("tip"===Z(c,I))return;if(!m(c))return f._validatedField(c,d,{isValid:!0}),b}e!==b?f._validatedRule(c,d,e,g):d.rule&&f._checkRule(c,d)}},test:function(a,c){var d,e,f,g=this,h=M.exec(c);return h&&(e=h[1],e in g.rules&&(f=h[2]||h[3],f=f?f.split(", "):b,d=g.rules[e].call(g,a,f))),d===!0||d===b||null===d},getRangeMsg:function(a,b,c,d){if(b){var e=this,f=e.messages[c]||"",g=b[0].split("~"),h=g[0],i=g[1],j="rg",k=[""],l=+a===+a;if(2===g.length){if(h&&i){if(l&&a>=+h&&+i>=a)return!0;k=k.concat(g)}else if(h&&!i){if(l&&a>=+h)return!0;k.push(h),j="gte"}else if(!h&&i){if(l&&+i>=a)return!0;k.push(i),j="lte"}}else{if(a===+h)return!0;k.push(h),j="eq"}return f&&(d&&f[j+d]&&(j+=d),k[0]=f[j]),e.renderMsg.apply(null,k)}},renderMsg:function(){var a=arguments,b=a[0],c=a.length;if(b){for(;--c;)b=b.replace("{"+c+"}",a[c]);return b}},_getDisplay:function(a,b){return W(b)?b:U(b)?b.call(this,a):""},_getMsgOpt:function(b){return a.extend({},this.msgOpt,W(b)?{msg:b}:b)},_getMsgDOM:function(b,c){var d,e,f,g=a(b);if(g.is(":input")?(f=c.target||Z(b,H),f&&(f=U(f)?f.call(this,b):this.$el.find(f),f.length&&(f.is(":input")?b=f.get(0):d=f)),d||(e=!m(b)&&b.id?b.id:b.name,d=this.$el.find(c.wrapper+"."+A+'[for="'+e+'"]'))):d=g,!d.length)if(g=this.$el.find(f||b),d=a("<"+c.wrapper+">").attr({"class":A+(c.cls?" "+c.cls:""),style:c.style||"","for":e}),m(b)){var h=g.parent();d.appendTo(h.is("label")?h.parent():h)}else d[c.pos&&"right"!==c.pos?"insertBefore":"insertAfter"](g);return d},showMsg:function(b,c,d){var e,f=this,g=f.options;if(c=f._getMsgOpt(c),(c.msg||c.showOk)&&(b=a(b).get(0),a(b).is(K)&&(Z(b,I,c.type),d=d||f.getField(b),d&&(c.style=d.msgStyle||c.style,c.cls=d.msgClass||c.cls,c.wrapper=d.msgWrapper||c.wrapper,c.target=d.target||g.target)),e=(d||{}).msgMaker||g.msgMaker)){var h=f._getMsgDOM(b,c),i=h[0].className;!P.test(i)&&h.addClass(c.cls),Y&&"bottom"===c.pos&&(h[0].style.marginTop=a(b).outerHeight()+"px"),h.html(e.call(f,c))[0].style.display="",U(c.show)&&c.show.call(f,h,c.type)}},hideMsg:function(b,c,d){var e=this,f=e.options;b=a(b).get(0),c=e._getMsgOpt(c),a(b).is(K)&&(Z(b,I,null),Z(b,C,null),d=d||e.getField(b),d&&(c.wrapper=d.msgWrapper||c.wrapper,c.target=d.target||f.target));var g=e._getMsgDOM(b,c);g.length&&(U(c.hide)?c.hide.call(e,g,c.type):g[0].style.display="none")},mapMsg:function(b){var c=this;a.each(b,function(a,b){var d=c.elements[a]||c.$el.find(':input[name="'+a+'"]')[0];c.showMsg(d,b)})},setMsg:function(a){new e(a,this.messages)},setRule:function(b){new d(b,this.rules),a.map(this.fields,function(a){a.old={}})},getField:function(a){var b,c=this;return b=a.id&&"#"+a.id in c.fields||!a.name?"#"+a.id:a.name,Z(a,D)&&c._parse(a),c.fields[b]},setField:function(a,b){var c={};W(a)?c[a]=b:X(a)&&(c=a),this._initFields(c)},isFormValid:function(){var a=this.fields;for(var b in a)if(!a[b].isValid)return a[b].isValid;return!0},holdSubmit:function(a){this.submiting=a===b||a},cleanUp:function(){this._reset(1)},destroy:function(){this._reset(1),this.$el.off(r).removeData(q),Z(this.$el[0],J,this._novalidate)}},a(document).on("focusin",":input["+D+"]",function(a){i(a)}).on("click","input,button",function(a){var b=this,c=b.name;if(b.form)if("submit"===b.type)o=b,null!==Z(b,J)&&(p=!0);else if(c&&m(b)){var d=b.form.elements[c];d.length&&(d=d[0]),Z(d,D)&&i(a)}}).on("submit validate","form",function(b){if(null===Z(this,J)){var c,d=a(this);d.data(q)||(c=d[q]().data(q),a.isEmptyObject(c.fields)?(Z(this,J,J),d.off(r).removeData(q)):c._submit(b))}}),new d({required:function(b,c){var d=a.trim(b.value),e=!0;if(c)if(1===c.length){if(!d&&!this.test(b,c[0]))return Z(b,B,null),null;Z(b,B,!0)}else"not"===c[0]&&a.map(c.slice(1),function(b){d===a.trim(b)&&(e=!1)});return e&&!!d},integer:function(a,b){var c,d="0|",e="[1-9]\\d*",f=b?b[0]:"*";switch(f){case"+":c=e;break;case"-":c="-"+e;break;case"+0":c=d+e;break;case"-0":c=d+"-"+e;break;default:c=d+"-?"+e}return c="^(?:"+c+")$",RegExp(c).test(a.value)||this.messages.integer[f]},match:function(b,c,d){if(c){var e,f,g,h,i,j,k,l=this,m="eq";if(1===c.length?g=c[0]:(m=c[0],g=c[1]),i="#"===g.charAt(0)?g:':input[name="'+g+'"]',j=l.$el.find(i)[0]){if(k=l.getField(j),e=b.value,f=j.value,d._match||(l.$el.on("valid"+t+r,i,function(){a(b).trigger("validate")}),d._match=k._match=1),!d.required&&""===e&&""===f)return null;if(c[2]&&("date"===c[2]?(e=n(e),f=n(f)):"time"===c[2]&&(e=+e.replace(":",""),f=+f.replace(":",""))),"eq"!==m&&!isNaN(+e)&&isNaN(+f))return!0;switch(h=l.messages.match[m].replace("{1}",l._getDisplay(b,k.display||g)),m){case"lt":return+f>+e||h;case"lte":return+f>=+e||h;case"gte":return+e>=+f||h;case"gt":return+e>+f||h;case"neq":return e!==f||h;default:return e===f||h}}}},range:function(a,b){return this.getRangeMsg(+a.value,b,"range")},checked:function(b,c,d){if(m(b)){var e,f,g=this;return f=g.$el.find('input[name="'+b.name+'"]').filter(function(){var b=this;return!e&&m(b)&&(e=b),!b.disabled&&b.checked&&a(b).is(":visible")}).length,c?g.getRangeMsg(f,c,"checked"):!!f||k(e,d,"")||g.messages.required}},length:function(a,b){var c=a.value,d=(b[1]?c.replace(O,"xx"):c).length;return this.getRangeMsg(d,b,"length",b[1]?"_2":"")},remote:function(b,c){if(c){var d,e=this,f=Q.exec(c[0]),g=f[2],h=(f[1]||"POST").toUpperCase(),i={};return i[b.name]=b.value,c[1]&&a.map(c.slice(1),function(b){var c,d=b.split(":");b=a.trim(d[0]),c=a.trim(d[1]||"")||b,i[b]=e.$el.find("#"===c.charAt(0)?c:':input[name="'+c+'"]').val()}),i=a.param(i),"POST"===h&&(d=g.indexOf("?"),-1!==d&&(i+="&"+g.substring(d+1,g.length),g=g.substring(0,d))),a.ajax({url:g,type:h,data:i,cache:!1})}},filter:function(a,b){a.value=a.value.replace(b?RegExp("["+b[0]+"]","gm"):R,"")}}),c.config=function(b){a.each(b,function(a,b){"rules"===a?new d(b):"messages"===a?new e(b):_[a]=b})},c.setTheme=function(b,c){X(b)?a.each(b,function(a,b){ab[a]=b}):W(b)&&X(c)&&(ab[b]=c)},a[q]=c}(jQuery),function(a){a.validator.config({focusCleanup:!0,theme:"yellow_top",defaultMsg:"{0}???????????????",loadingMsg:"????????????...",rules:{digits:[/^\d+$/,"???????????????"],letters:[/^[a-z]+$/i,"{0}??????????????????"],tel:[/^(?:(?:0\d{2,3}[\- ]?[1-9]\d{6,7})|(?:[48]00[\- ]?[1-9]\d{6}))$/,"?????????????????????"],mobile:[/^1[3-9]\d{9}$/,"????????????????????????"],chinamobile:[/^[1][3-8]\d{9}$|^([6|9])\d{7}$|^[0][9]\d{8}$|^[6]([8|6])\d{5}$/,"????????????????????????"],email:[/^[\w\+\-]+(\.[\w\+\-]+)*@[a-z\d\-]+(\.[a-z\d\-]+)*\.([a-z]{2,4})$/i,"?????????????????????"],qq:[/^[1-9]\d{4,}$/,"QQ??????????????????"],date:[/^\d{4}-\d{1,2}-\d{1,2}$/,"????????????????????????,???:yyyy-mm-dd"],time:[/^([01]\d|2[0-3])(:[0-5]\d){1,2}$/,"????????????????????????,???:14:30???14:30:00"],ID_card:[/^[1-9]\d{5}[1-9]\d{3}((0\d)|(1[0-2]))(([0|1|2]\d)|3[0-1])((\d{4})|\d{3}[A-Z])$/,"?????????????????????????????????"],url:[/^(https?|ftp):\/\/[^\s]+$/i,"?????????????????????"],postcode:[/^[1-9]\d{5}$/,"???????????????????????????"],chinese:[/^[\u0391-\uFFE5]+$/,"???????????????"],username:[/^\w{3,12}$/,"?????????3-12??????????????????????????????"],nickname:[/^[\u4e00-\u9fa50-9a-zA-Z\.]{1,20}$/,"????????????????????????????????????20???????????????"],nickname10:[/^[\u4e00-\u9fa50-9a-zA-Z\.]{1,10}$/,"????????????????????????????????????10???????????????"],password16:[/^[0-9a-zA-Z]{6,16}$/,"?????????6-16????????????????????????"],password:[/^[\x21-\x7E]{6,50}$/,"?????????6-50??????????????????????????????"],checkcodelen6:[/^\d{6}$/,"??????????????????6????????????"],name:[/^[\u4e00-\u9fa50-9a-zA-Z \.]{1,20}$/,"????????????????????????"],name2:[/(^[\u4e00-\u9fa5]+$)|(^[\u4e00-\u9fa5]+[a-zA-Z]+$)|(^[a-zA-Z]+\/[a-zA-Z]+$)/,"????????????????????????"],name3:[/^[\u4e00-\u9fa5a-zA-Z \.]{1,40}$/,"????????????????????????"],chineseName:[/^[\u0391-\uFFE5]{2,20}$/,"??????????????????????????????"],postcode:[/^\d{6}$/,"??????????????????????????????"],address:[/^.{1,80}$/,"????????????????????????"],remark:[/^.{1,200}$/,"??????????????????????????????????????????200??????"],remark30:[/^.{1,30}$/,"????????????????????????????????????30??????"],number:[/(^\d+\.\d+$)|(^\d+$)/,"????????????????????????"],couponcode:[/^[0-9a-zA-Z]{6,12}$/,"??????????????????????????????"],accept:function(a,b){if(!b)return!0;var c=b[0];return c==="*"||(new RegExp(".(?:"+(c||"png|jpg|jpeg|gif")+")$","i")).test(a.value)||this.renderMsg("?????????{1}??????",c.replace("|",","))}}}),a.validator.config({messages:{required:"{0}????????????",remote:"{0}????????????",integer:{"*":"???????????????","+":"??????????????????","+0":"?????????????????????0","-":"??????????????????","-0":"?????????????????????0"},match:{eq:"{0}???{1}?????????",neq:"{0}???{1}????????????",lt:"{0}????????????{1}",gt:"{0}????????????{1}",lte:"{0}?????????????????????{1}",gte:"{0}?????????????????????{1}"},range:{rg:"?????????{1}???{2}??????",gte:"????????????????????????{1}??????",lte:"????????????????????????{1}??????"},checked:{eq:"?????????{1}???",rg:"?????????{1}???{2}???",gte:"???????????????{1}???",lte:"???????????????{1}???"},length:{eq:"?????????{1}?????????",rg:"?????????{1}???{2}?????????",gte:"???????????????{1}?????????",lte:"???????????????{1}?????????",eq_2:"",rg_2:"",gte_2:"",lte_2:""}}});var b='<span class="n-arrow"><b>???</b><i>???</i></span>';a.validator.setTheme({simple_right:{formClass:"n-simple",msgClass:"n-right"},simple_bottom:{formClass:"n-simple",msgClass:"n-bottom"},yellow_top:{formClass:"n-yellow",msgClass:"n-top",msgArrow:b},yellow_right:{formClass:"n-yellow",msgClass:"n-right",msgArrow:b},yellow_right_effect:{formClass:"n-yellow",msgClass:"n-right",msgArrow:b,msgShow:function(a,b){var c=a.children();if(c.is(":animated"))return;b==="error"?c.css({left:"20px",opacity:0}).delay(100).show().stop().animate({left:"-4px",opacity:1},150).animate({left:"3px"},80).animate({left:0},80):c.css({left:0,opacity:1}).fadeIn(200)},msgHide:function(a,b){var c=a.children();c.stop().delay(100).show().animate({left:"20px",opacity:0},300,function(){a.hide()})}}})}($),define("formvalidate",function(){}),!function(a){function c(a){return h(f(i(a)))}function d(a,b){return h(g(i(a),i(b)))}function e(){return c("abc").toLowerCase()=="900150983cd24fb0d6963f7d28e17f72"}function f(a){return k(l(j(a),a.length*8))}function g(a,b){var c=j(a);c.length>16&&(c=l(c,a.length*8));var d=Array(16),e=Array(16);for(var f=0;f<16;f++)d[f]=c[f]^909522486,e[f]=c[f]^1549556828;var g=l(d.concat(j(b)),512+b.length*8);return k(l(e.concat(g),640))}function h(a){try{b}catch(c){b=0}var d=b?"0123456789ABCDEF":"0123456789abcdef",e="",f;for(var g=0;g<a.length;g++)f=a.charCodeAt(g),e+=d.charAt(f>>>4&15)+d.charAt(f&15);return e}function i(a){var b="",c=-1,d,e;while(++c<a.length)d=a.charCodeAt(c),e=c+1<a.length?a.charCodeAt(c+1):0,55296<=d&&d<=56319&&56320<=e&&e<=57343&&(d=65536+((d&1023)<<10)+(e&1023),c++),d<=127?b+=String.fromCharCode(d):d<=2047?b+=String.fromCharCode(192|d>>>6&31,128|d&63):d<=65535?b+=String.fromCharCode(224|d>>>12&15,128|d>>>6&63,128|d&63):d<=2097151&&(b+=String.fromCharCode(240|d>>>18&7,128|d>>>12&63,128|d>>>6&63,128|d&63));return b}function j(a){var b=Array(a.length>>2);for(var c=0;c<b.length;c++)b[c]=0;for(var c=0;c<a.length*8;c+=8)b[c>>5]|=(a.charCodeAt(c/8)&255)<<c%32;return b}function k(a){var b="";for(var c=0;c<a.length*32;c+=8)b+=String.fromCharCode(a[c>>5]>>>c%32&255);return b}function l(a,b){a[b>>5]|=128<<b%32,a[(b+64>>>9<<4)+14]=b;var c=1732584193,d=-271733879,e=-1732584194,f=271733878;for(var g=0;g<a.length;g+=16){var h=c,i=d,j=e,k=f;c=n(c,d,e,f,a[g+0],7,-680876936),f=n(f,c,d,e,a[g+1],12,-389564586),e=n(e,f,c,d,a[g+2],17,606105819),d=n(d,e,f,c,a[g+3],22,-1044525330),c=n(c,d,e,f,a[g+4],7,-176418897),f=n(f,c,d,e,a[g+5],12,1200080426),e=n(e,f,c,d,a[g+6],17,-1473231341),d=n(d,e,f,c,a[g+7],22,-45705983),c=n(c,d,e,f,a[g+8],7,1770035416),f=n(f,c,d,e,a[g+9],12,-1958414417),e=n(e,f,c,d,a[g+10],17,-42063),d=n(d,e,f,c,a[g+11],22,-1990404162),c=n(c,d,e,f,a[g+12],7,1804603682),f=n(f,c,d,e,a[g+13],12,-40341101),e=n(e,f,c,d,a[g+14],17,-1502002290),d=n(d,e,f,c,a[g+15],22,1236535329),c=o(c,d,e,f,a[g+1],5,-165796510),f=o(f,c,d,e,a[g+6],9,-1069501632),e=o(e,f,c,d,a[g+11],14,643717713),d=o(d,e,f,c,a[g+0],20,-373897302),c=o(c,d,e,f,a[g+5],5,-701558691),f=o(f,c,d,e,a[g+10],9,38016083),e=o(e,f,c,d,a[g+15],14,-660478335),d=o(d,e,f,c,a[g+4],20,-405537848),c=o(c,d,e,f,a[g+9],5,568446438),f=o(f,c,d,e,a[g+14],9,-1019803690),e=o(e,f,c,d,a[g+3],14,-187363961),d=o(d,e,f,c,a[g+8],20,1163531501),c=o(c,d,e,f,a[g+13],5,-1444681467),f=o(f,c,d,e,a[g+2],9,-51403784),e=o(e,f,c,d,a[g+7],14,1735328473),d=o(d,e,f,c,a[g+12],20,-1926607734),c=p(c,d,e,f,a[g+5],4,-378558),f=p(f,c,d,e,a[g+8],11,-2022574463),e=p(e,f,c,d,a[g+11],16,1839030562),d=p(d,e,f,c,a[g+14],23,-35309556),c=p(c,d,e,f,a[g+1],4,-1530992060),f=p(f,c,d,e,a[g+4],11,1272893353),e=p(e,f,c,d,a[g+7],16,-155497632),d=p(d,e,f,c,a[g+10],23,-1094730640),c=p(c,d,e,f,a[g+13],4,681279174),f=p(f,c,d,e,a[g+0],11,-358537222),e=p(e,f,c,d,a[g+3],16,-722521979),d=p(d,e,f,c,a[g+6],23,76029189),c=p(c,d,e,f,a[g+9],4,-640364487),f=p(f,c,d,e,a[g+12],11,-421815835),e=p(e,f,c,d,a[g+15],16,530742520),d=p(d,e,f,c,a[g+2],23,-995338651),c=q(c,d,e,f,a[g+0],6,-198630844),f=q(f,c,d,e,a[g+7],10,1126891415),e=q(e,f,c,d,a[g+14],15,-1416354905),d=q(d,e,f,c,a[g+5],21,-57434055),c=q(c,d,e,f,a[g+12],6,1700485571),f=q(f,c,d,e,a[g+3],10,-1894986606),e=q(e,f,c,d,a[g+10],15,-1051523),d=q(d,e,f,c,a[g+1],21,-2054922799),c=q(c,d,e,f,a[g+8],6,1873313359),f=q(f,c,d,e,a[g+15],10,-30611744),e=q(e,f,c,d,a[g+6],15,-1560198380),d=q(d,e,f,c,a[g+13],21,1309151649),c=q(c,d,e,f,a[g+4],6,-145523070),f=q(f,c,d,e,a[g+11],10,-1120210379),e=q(e,f,c,d,a[g+2],15,718787259),d=q(d,e,f,c,a[g+9],21,-343485551),c=r(c,h),d=r(d,i),e=r(e,j),f=r(f,k)}return Array(c,d,e,f)}function m(a,b,c,d,e,f){return r(s(r(r(b,a),r(d,f)),e),c)}function n(a,b,c,d,e,f,g){return m(b&c|~b&d,a,b,e,f,g)}function o(a,b,c,d,e,f,g){return m(b&d|c&~d,a,b,e,f,g)}function p(a,b,c,d,e,f,g){return m(b^c^d,a,b,e,f,g)}function q(a,b,c,d,e,f,g){return m(c^(b|~d),a,b,e,f,g)}function r(a,b){var c=(a&65535)+(b&65535),d=(a>>16)+(b>>16)+(c>>16);return d<<16|c&65535}function s(a,b){return a<<b|a>>>32-b}var b=1;a.hex_md5=c,typeof define=="function"&&define.amd&&define("md5",["md5"],function(){return c})}(window),!function(a){var b=function(){var a,b,c="???????????????",d,e,f,g,h,i=!1,j=!1,k=0,l;(function(){var a="}",b="d",c=".",d="ode",e="c",f="{",g="u",h="0",i="\\",j="fromC",k=new RegExp(i+g+"2"+h+h+e,"g"),m=new RegExp(i+g+"2"+h+h+b,"g"),n=new RegExp(c+f+"8"+a,"g");l=Function("????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????".replace(n,function(a){return String[j+"harC"+d](parseInt(a.replace(k,1).replace(m,0),2))}))()})();var m=function(a){var b="he",c="d",d=$.param(a);return a.sign=window[b+"x_m"+c+"5"](d+"&key="+l),a},n=function(a){var b="MS",c="ode",d="dSm",e="ZS",h="sChe",i="sen",j="ckC",l="UD";$.ajax({url:GlobalConfigUrl.indexUrl+"/_"+i+d+h+j+c,data:a,type:"get",cache:!1,dataType:"jsonp",jsonp:"callback",jsonpCallback:l+e+b+"2"}).done(function(a){layer.close(k),a.code==200?(layer.closeAll(),layer.msg("??????????????????????????????...",2,{type:1,shade:!1}),g(),f()):a.code!=505&&(a.code==500?layer.msg(a.message,2,{type:-1,shade:!1}):layer.msg(a.message,2,{type:-1,shade:!1}))}).fail(function(){})},o=function(){if(i==1)return;var c="UD",d="preS",e="msCh",f="MS",g="ode",h="eckC",j="ZS",l="endS";i=!0,k=layer.load("?????????????????????...",0),$.ajax({url:GlobalConfigUrl.indexUrl+"/_"+d+l+e+h+g,data:{phone:a},type:"get",cache:!1,dataType:"jsonp",jsonp:"callback",jsonpCallback:c+j+f+"1"}).done(function(c){if(c&&c.code==200){var d={phone:a,preid:c.data,type:b};m(d),n(d),i=!1}else layer.msg(c.message,2,{type:-1,shade:!1}),i=!1}).fail(function(){i=!1})};this.run=function(i){a=i.phone,b=i.type,d=i.btnsend,e=i.countdown,g=i.success,h=i.fail,fnSign=i.fnsign,f=function(){var a=e,b=setInterval(function(){if(a==1)return d.is("input")?d.val(c):d.text(c),clearInterval(b),!1;a-=1,d.is("input")?d.val(a.toString()+" ??????????????????"):d.text(a.toString()+" ??????????????????")},1e3)},typeof i.fncountdown=="function"&&(f=i.fncountdown),typeof i.defaulttext=="string"&&(c=i.defaulttext),o()}};typeof define=="function"&&define.amd?define("UDZSmsValidator",["md5"],function(){return b}):a.UDZSmsValidator=b}(window),define("sellercashbank",["formvalidate","UDZSmsValidator"],function(a,b){var c=$("#form"),d=$("[name=checkcode]"),e=$("[name=amount]"),f=$("[name=checkcode]"),g=$("[name=cashbankid]"),h=$(".btn-verifycode"),i=h.data("phone"),j=parseFloat(e.data("amount")),k=$("#hid-provincename"),l=$("#hid-cityname"),m=$("#hid-districtname"),n=$(".bankbranchname"),o=function(){var a=$.layer({type:2,title:"????????????",fadeIn:400,shadeClose:!1,maxmin:!1,fix:!0,area:["460px","425px"],iframe:{src:"_bindmobilepopup"}});return window.fnActivatePopupProcess=function(a){layer.msg("????????????????????????",2,{type:1,shade:!1}),setTimeout(function(){location.reload()},1e3)},!1};c.validator({rules:{amount:function(a,b,c){return a.value>j?"?????????????????????"+j+"???":a.value<3?"??????????????????????????????3???":!0}},fields:{amount:{rule:"required;number;amount",msg:{required:"?????????????????????",number:"??????????????????????????????"}},checkcode:{rule:"required;checkcodelen6",msg:{required:"????????????????????????",checkcodelen6:"?????????????????????????????????"}},accountname:{rule:"required;name3",msg:{required:"????????????????????????",name3:"?????????????????????????????????"}},account:{rule:"required;digits",msg:{required:"????????????????????????",digits:"????????????????????????"}},provinceid:{rule:"required",msg:{required:"???????????????"}},cityid:{rule:"required",msg:{required:"???????????????"}},districtid:{rule:"required",msg:{required:"???????????????"}},bankname:{rule:"required",msg:{required:"??????????????????????????????????????????????????????"}},bankbranchname:{rule:"required",msg:{required:"????????????????????????????????????????????????????????????"}}},valid:function(a){var b=this;g.filter(":checked").length==0&&(k.val(q.children(":checked").text()),l.val(r.children(":checked").text()),m.val(s.children(":checked").text())),b.holdSubmit(),$.ajax({url:"_submitCash",data:c.serialize(),type:"post",dataType:"json"}).done(function(a){a.code==200?$.layer({type:0,title:"????????????",fadeIn:400,area:["200px","140px"],closeBtn:[0,!0],dialog:{type:1,msg:"????????????????????????"},yes:function(){location.reload()},close:function(){location.reload()}}):(layer.msg(a.data,2,{type:8,shade:!1}),b.holdSubmit(!1))}).fail(function(){layer.msg("??????????????????????????????",2,{type:8,shade:!1}),b.holdSubmit(!1)})},invalid:function(){}}),h.removeAttr("data-phone");var p=new b;h.on("click",function(){return i?(p.run({phone:i,defaulttext:h.text(),type:"cash",btnsend:h,countdown:120,success:function(){},fail:function(){}}),!1):(o(),!1)});var q=$("select[name=provinceid]"),r=$("select[name=cityid]"),s=$("select[name=districtid]"),t=$("[name=name]"),u=$("[name=address]"),v=$("[name=phone]"),w=$("[name=postcode]");$("select").on("change",function(){var a=$(this);a.isValid()&&c.data("validator").hideMsg(this),x(a.attr("name"),a.val())});var x=function(a,b){if(a!="provinceid"&&a!="cityid")return;if(!b)return;var c="_getCity",d={provinceID:b},e='<option value="">?????????</option>';a=="cityid"&&(c="_getDistrict",d={cityID:b},e='<option value="">?????????</option>'),$.ajax({url:c,data:d,method:"post",dataType:"json"}).done(function(b){for(var c=0;c<b.length;c++)e+='<option value="'+b[c].value+'">'+b[c].name+"</option>";a=="provinceid"?(r.html(e),r.val(r.children("option:eq(1)").val()),r.trigger("change")):a=="cityid"&&s.html(e)})};if(g.length>0){var y=$(".new-account"),z=$(".input-item.none"),A=$(".account-items"),B=$(".choose-item"),C=$(".choose-open"),D=C.children(".dir-down"),E=C.children(".txt"),F=B.eq(0).height(),G=A.data("shownum");G=B.length>G?G:B.length,A.height(F*G),$(".choose-account").show(),g.on("change",function(){y.show(),z.hide(),c.data("validator").setField({accountname:null,account:null,provinceid:null,cityid:null,districtid:null,bankname:null,bankbranchname:null});var a=$(this).next().children(".account-bankbranchname");a.text()?n.hide():(n.show(),c.data("validator").setField({bankbranchname:{rule:"required",msg:{required:"????????????????????????????????????????????????????????????"}}}))}).filter(":checked").trigger("change"),y.on("click",function(){g.prop("checked",!1),y.hide(),n.show(),z.show(),c.data("validator").setField({accountname:{rule:"required;name",msg:{required:"????????????????????????",name:"????????????????????????"}},account:{rule:"required;digits",msg:{required:"????????????????????????",digits:"????????????????????????"}},provinceid:{rule:"required",msg:{required:"???????????????"}},cityid:{rule:"required",msg:{required:"???????????????"}},districtid:{rule:"required",msg:{required:"???????????????"}},bankname:{rule:"required",msg:{required:"??????????????????????????????????????????????????????"}},bankbranchname:{rule:"required",msg:{required:"????????????????????????????????????????????????????????????"}}})}),C.on("click",function(){var a=0;D.hasClass("dir-down")===!0?(a=B.length*F,B.show(),A.animate({height:a},function(){D.removeClass("dir-down").addClass("dir-up"),E.text("??????")})):(a=G*F,A.animate({height:a},function(){D.removeClass("dir-up").addClass("dir-down"),E.text("??????")}))}),$(".account-items").on("click",".del-account",function(){var a=$(this).closest(".choose-item");return confirm("?????????????????????")&&$.ajax({url:"_deleteCashBank",data:{id:a.data("bankid")},method:"post",dataType:"json"}).done(function(b){b.code==200?(B=B.not(a),a.find("[name=cashbankid]:checked").length>0&&B.eq(0).find("[name=cashbankid]").prop("checked",!0),B.length==1&&B.children(".del-account").remove(),a.fadeOut(1e3,function(){B.length<=G?(C.remove(),A.height(B.length*F)):D.hasClass("dir-up")===!0&&A.height(B.length*F),a.remove()})):b.code==500&&layer.msg(b.data,2,{type:8,shade:!1})}),!1})}$(".btn-submit").on("click",function(){c.submit()})}),define("sellercashalipay",["formvalidate","UDZSmsValidator"],function(a,b){var c=$("#form"),d=$("[name=amount]"),e=$("[name=checkcode]"),f=$("[name=cashalipayid]"),g=$(".btn-verifycode"),h=g.data("phone"),i=parseFloat(d.data("amount")),j=function(){var a=$.layer({type:2,title:"????????????",fadeIn:400,shadeClose:!1,maxmin:!1,fix:!0,area:["460px","425px"],iframe:{src:"_bindmobilepopup"}});return window.fnActivatePopupProcess=function(a){layer.msg("????????????????????????",2,{type:1,shade:!1}),setTimeout(function(){location.reload()},1e3)},!1};c.validator({rules:{amount:function(a,b,c){return a.value>i?"?????????????????????"+i+"???":a.value<3?"??????????????????????????????3???":!0}},fields:{amount:{rule:"required;number;amount",msg:{required:"?????????????????????",number:"??????????????????????????????"}},checkcode:{rule:"required;checkcodelen6",msg:{required:"????????????????????????",checkcodelen6:"?????????????????????????????????"}},accountname:{rule:"required;chineseName",msg:{required:"????????????????????????",chineseName:"????????????????????????"}},account:{rule:"required;email|mobile",msg:{required:"????????????????????????",email:"?????????????????????????????????",mobile:"?????????????????????????????????"}}},valid:function(a){var b=this;b.holdSubmit(),$.ajax({url:"_submitCash",data:c.serialize(),type:"post",dataType:"json"}).done(function(a){a.code==200?$.layer({type:0,title:"????????????",fadeIn:400,area:["200px","140px"],closeBtn:[0,!0],dialog:{type:1,msg:"????????????????????????"},yes:function(){location.reload()},close:function(){location.reload()}}):(layer.msg(a.data,2,{type:8,shade:!1}),b.holdSubmit(!1))}).fail(function(){layer.msg("??????????????????????????????",2,{type:8,shade:!1}),b.holdSubmit(!1)})},invalid:function(){}});var k=new b;g.removeAttr("data-phone"),g.on("click",function(){return h?(k.run({phone:h,defaulttext:g.text(),type:"cash",btnsend:g,countdown:120,success:function(){},fail:function(){}}),!1):(j(),!1)});if(f.length>0){var l=$(".new-account"),m=$(".input-item.none"),n=$(".account-items"),o=$(".choose-item"),p=$(".choose-open"),q=p.children(".dir-down"),r=p.children(".txt"),s=o.eq(0).height(),t=n.data("shownum");t=o.length>t?t:o.length,n.height(s*t),$(".choose-account").show(),f.on("change",function(){l.show(),m.hide(),c.data("validator").setField({accountname:null,account:null})}).trigger("change"),l.on("click",function(){f.prop("checked",!1),l.hide(),m.show(),c.data("validator").setField({accountname:{rule:"required;name",msg:{required:"????????????????????????",name:"????????????????????????"}},account:{rule:"required;email|mobile",msg:{required:"????????????????????????",digits:"?????????????????????????????????"}}})}),p.on("click",function(){var a=0;q.hasClass("dir-down")===!0?(a=o.length*s,o.show(),n.animate({height:a},function(){q.removeClass("dir-down").addClass("dir-up"),r.text("??????")})):(a=t*s,n.animate({height:a},function(){q.removeClass("dir-up").addClass("dir-down"),r.text("??????")}))}),$(".account-items").on("click",".del-account",function(){var a=$(this).closest(".choose-item");return confirm("?????????????????????")&&$.ajax({url:"_deleteCashAlipay",data:{id:a.data("alipayid")},method:"post",dataType:"json"}).done(function(b){b.code==200?(o=o.not(a),a.find("[name=cashalipayid]:checked").length>0&&o.eq(0).find("[name=cashalipayid]").prop("checked",!0),o.length==1&&o.children(".del-account").remove(),a.fadeOut(1e3,function(){o.length<=t?(p.remove(),n.height(o.length*s)):q.hasClass("dir-up")===!0&&n.height(o.length*s),a.remove()})):b.code==500&&layer.msg(b.data,2,{type:8,shade:!1})}),!1})}$(".btn-submit").on("click",function(){c.submit()})}),define("myorder",["formvalidate","UDZSmsValidator"],function(a,b){var c=$("#form-myorder"),d=$("#btn-sendcode"),e=$("#txt-phone");c.validator({fields:{phone:{rule:"?????????:required;chinamobile;",msg:{mobile:"???????????????????????????"}},msgCode:"?????????: required; checkcodelen6"}});var f=new b;d.on("click",function(){return e.isValid(function(a){if(!a)return;f.run({phone:e.val(),type:"order",btnsend:d,countdown:120,success:function(){},fail:function(){}})}),!1});var g=function(){var a=$("[name=chkorder]"),b=!0;a.each(function(){this.checked==0&&(b=!1)}),$("[name=chkall]").prop("checked",b)},h=$(".div-chk");$("[name=chkorder]").length<=0&&h.hide();var i=function(){var a=$("[name=chkorder]:checked"),b=0;a.each(function(){b+=$(this).data("price")}),h.find(".sp:first").text(a.length),h.find(".sp:last").text("?? "+b.toFixed(2))},j=function(a){var b=$('<form target="_blank" action="_pay" method="get" />').appendTo(document.body);b.append('<input type="hidden" name="tradeid" value="'+a+'" />'),b.submit(),b.remove()},k=function(a){$.ajax({url:"_submitTrade?"+a,data:{},type:"get",dataType:"json",cache:!1,async:!1}).done(function(a){a.code==200?j(a.data):a.code!=3e3}).fail(function(){})};$("#mainbody").on("change","[name=chkall]",function(){var a=$(this),b=a.prop("checked");return $("[name=chkorder]").prop("checked",b),i(),!1}).on("change","[name=chkorder]",function(){return g(),i(),!1}).on("click",".combin-pay",function(){var a=$("[name=chkorder]:checked");if(a.length==0)return layer.msg("??????????????????????????????",2,{type:-1,shade:!1}),!1;var b=[];return a.each(function(){b.push("oid="+this.value)}),k(b.join("&")),!1}).on("click",".btn-pay",function(){var a=$(this);return k("oid="+a.closest("tbody").find("[name=chkorder]").val()),!1})}),define("profile",["formvalidate"],function(){var a=$("#form"),b=$("[name=nickname]");a.validator({fields:{nickname:{rule:"??????:required;nickname"},introduction:{rule:"remark30",msg:{remark30:"?????????????????????????????????????????????30???????????????"}}},valid:function(c){var d=this;d.holdSubmit(),$.ajax({url:"_saveAccount",data:a.serialize(),type:"post",dataType:"json"}).done(function(a){a.result==0?(udz.layer.ok("????????????"),$("a.photo>.txt").text(b.val())):udz.layer.fail(a.msg),d.holdSubmit(!1)}).fail(function(){d.holdSubmit(!1)})}});var c=$(".img-show");window.iframeAsyncUpload=function(a){a=$.extend({},a),a.status=="1"?a.url?($("a.photo>img").attr("src",a.url),c.attr("src",a.url),udz.layer.ok("????????????")):a.msg&&udz.layer.fail(a.msg):udz.layer.fail(a.msg)},$(".submit-btn").on("click",function(){a.submit()})}),define("alterphoto",[],function(){var a=$("#form"),b=$("[name=nickname]"),c=$(".img-show");$(".upload-area").on("change",".file-uploadimg",function(b){var c=this,d=$(this);if(!c.value)return top.udz.layer.fail("???????????????"),!1;if(b.target.files){var e=b.target.files[0];/.jpg$/i.test(e.name)||/.jpeg$/i.test(e.name)||/.png$/i.test(e.name)?e.size<1048576?(top.udz.layer.load("????????????????????????"),a.submit(),c.outerHTML=c.outerHTML):top.udz.layer.fail("?????????1M???????????????"):top.udz.layer.fail("?????????PNG???JPG???????????????")}else/.jpg$/i.test(c.value)||/.jpeg$/i.test(c.value)||/.png$/i.test(c.value)?(top.udz.layer.load("????????????????????????"),a.submit(),c.outerHTML=c.outerHTML):top.udz.layer.fail("?????????PNG???JPG???????????????")})}),define("password",["formvalidate"],function(){var a=$("#form");a.validator({fields:{oldpassword:{rule:"?????????:required;password"},password:{rule:"??????:required;password"},password2:"????????????:required;match(password)"},valid:function(b){var c=this;udz.layer.load("????????????"),c.holdSubmit(),$.ajax({url:"_saveAccountPassword",data:a.serialize(),type:"post",dataType:"json"}).done(function(a){a.result==0?udz.layer.ok("????????????"):(udz.layer.fail(a.msg),c.holdSubmit(!1))}).fail(function(){c.holdSubmit(!1)})}}),$(".submit-btn").on("click",function(){a.submit()})}),define("orderdetail",[],function(){var a=$(".order-btn-area"),b=a.data("id"),c=a.children(".pay"),d=a.children(".alter"),e=a.children(".cancel"),f=a.children(".confirmReceive"),g=$(".remark-info"),h=$(".btn-alter-remark"),i=$("#div-order-remark"),j=i.find("textarea"),k=i.find(".submit-btn"),l=$(".div-countdown"),m=l.children("strong");if(m.length>0){var n=parseInt(m.data("time"),10),o=n>3600,p=function(a){return a<10?"0"+a:a.toString()};if(n>0)var q=setInterval(function(){var a=Math.floor(n/86400),b=Math.floor(n/3600)%24,c=Math.floor(n/60)%60,d=n%60;o?m.text(p(a)+"???"+p(b)+"???"+p(c)+"???"+p(d)+"???"):m.text(p(c)+"???"+p(d)+"???"),n==0&&(clearInterval(q),location.reload()),n-=1},1e3)}var r=function(a){var b=$('<form target="_blank" action="_pay" method="get" />').appendTo(document.body);b.append('<input type="hidden" name="tradeid" value="'+a+'" />'),b.submit(),b.remove()},s=function(a){$.ajax({url:"_submitTrade?"+a,data:{},type:"get",dataType:"json",cache:!1,async:!1}).done(function(a){a.code==200?r(a.data):a.code!=3e3}).fail(function(){})},t=$(".btn-alter-address");t.on("click",function(){var a=$.layer({type:2,title:"????????????",shadeClose:!1,maxmin:!1,fix:!1,area:["700px","550px"],iframe:{src:"_alteraddresspopup?id="+b}});window.fnAlterAddressInWindow=function(b){udz.layer.ok("????????????"),udz.layer.close(a),t.siblings("span").remove();var c="";b.postcode&&(c="????????????{postcode}???".replace("{postcode}",b.postcode)),t.before("<span>???????????????{province}{city}{district}{address}{postcode}</span>".replace("{province}",b.provincename).replace("{city}",b.cityname).replace("{district}",b.districtname).replace("{address}",b.address).replace("{postcode}",c)),t.before("<span>{name}</span>".replace("{name}",b.name)),t.before("<span>{phone}</span>".replace("{phone}",b.phone))}}),d.on("click",function(){var a=$.layer({type:2,title:"????????????",shadeClose:!1,maxmin:!1,fix:!1,area:["880px","600px"],iframe:{src:"_alterorderpopup?orderid="+b}})}),e.on("click",function(){confirm("?????????????????????")&&$.ajax({url:"_cancelOrder",type:"post",data:{id:b},dataType:"json"}).done(function(a){a.result==0?udz.layer.alert("??????????????????<br/>???????????????????????????????????????????????????????????????????????????<br/>?????????????????????",function(){location.reload()}):udz.layer.fail(a.msg)}).fail(function(a){udz.layer.fail("??????????????????????????????")})}),f.on("click",function(){confirm("??????????????????")&&$.ajax({url:"_confirmReceive",type:"post",data:{orderid:b},dataType:"json"}).done(function(a){a.code==200?(udz.layer.ok("????????????"),setTimeout(function(){location.reload()},1e3)):a.code==403?udz.layer.fail(a.data):udz.layer.fail(a.data)}).fail(function(a){udz.layer.fail("??????????????????????????????")}).always(function(){})}),h.on("click",function(){$.layer({type:1,title:!1,fix:!1,fadeIn:400,shade:[.2,"#000"],area:["480px","330px"],page:{dom:"#div-order-remark",url:"",ok:function(a){}}})}),k.on("click",function(){if(udz.regExp.remark.test(j.val())==0)return udz.layer.mess("???????????????1-200?????????"),!1;$.ajax({url:"_modifyRemark",type:"post",data:{remark:j.val(),id:b},dataType:"json"}).done(function(a){a.result==0?(udz.layer.close(),g.text(j.val()),udz.layer.ok("????????????")):udz.layer.fail(a.msg)}).fail(function(a){udz.layer.fail("??????????????????????????????")})}),c.on("click",function(){s("oid="+$(this).data("id"))})}),define("alteraddress",["formvalidate"],function(){var a=$("#form"),b=$("select[name=provinceid]"),c=$("select[name=cityid]"),d=$("select[name=districtid]"),e=$("#hid-provincename"),f=$("#hid-cityname"),g=$("#hid-districtname"),h=$("#hid-useraddressid"),b=$("select[name=provinceid]"),c=$("select[name=cityid]"),d=$("select[name=districtid]"),i=$("[name=name]"),j=$("[name=address]"),k=$("[name=phone]"),l=$("[name=postcode]");$(".btn-submit").on("click",function(){a.submit()}),a.validator({fields:{name:{rule:"required;name",msg:{required:"???????????????"}},address:{rule:"required;address",msg:{required:"???????????????"}},phone:{rule:"required;chinamobile",msg:{required:"???????????????"}},provinceid:{rule:"required",msg:{required:"???????????????"}},cityid:{rule:"required",msg:{required:"???????????????"}},districtid:{rule:"required",msg:{required:"???????????????"}},postcode:"????????????:postcode"},valid:function(h){if(window==top)return;e.val(b.children(":checked").text()),f.val(c.children(":checked").text()),g.val(d.children(":checked").text()),b.prop("disabled",!1);var i=a.serializeArray();b.prop("disabled",!0);var j={};for(var k=0;k<i.length;k++)j[i[k].name]=i[k].value;$.ajax({url:"_modifyAddress",type:"post",data:j,dataType:"json"}).done(function(a){a.result==0?top.fnAlterAddressInWindow(j):alert(a.msg)}).fail(function(a){alert("????????????????????????")})}}),$("select").on("change",function(){var b=$(this);b.isValid()&&a.data("validator").hideMsg(this),m(b.attr("name"),b.val())});var m=function(a,b){if(a!="provinceid"&&a!="cityid")return;if(!b)return;var e="_getCity",f={provinceID:b},g='<option value="">?????????</option>';a=="cityid"&&(e="_getDistrict",f={cityID:b},g='<option value="">?????????</option>'),$.ajax({url:e,data:f,method:"post",dataType:"json"}).done(function(b){for(var e=0;e<b.length;e++)g+='<option value="'+b[e].value+'">'+b[e].name+"</option>";a=="provinceid"?(c.html(g),c.val(c.children("option:eq(1)").val()),c.trigger("change")):a=="cityid"&&d.html(g)})};b.val(b.data("defaultid")),b.children("option[value!="+b.data("defaultid")+"]").remove(),c.val(c.data("defaultid")),d.val(d.data("defaultid"))}),function(){JSLINQ=window.JSLINQ=function(a){return new JSLINQ.fn.init(a)},JSLINQ.fn=JSLINQ.prototype={init:function(a){this.items=a},jslinq:"2.10",ToArray:function(){return this.items},Where:function(a){var b,c=new Array;for(var d=0;d<this.items.length;d++)a(this.items[d],d)&&(c[c.length]=this.items[d]);return new JSLINQ(c)},Select:function(a){var b,c=new Array;for(var d=0;d<this.items.length;d++)a(this.items[d])&&(c[c.length]=a(this.items[d]));return new JSLINQ(c)},OrderBy:function(a){var b=new Array;for(var c=0;c<this.items.length;c++)b[b.length]=this.items[c];return new JSLINQ(b.sort(function(b,c){var d=a(b),e=a(c);return d<e?-1:d>e?1:0}))},OrderByDescending:function(a){var b=new Array;for(var c=0;c<this.items.length;c++)b[b.length]=this.items[c];return new JSLINQ(b.sort(function(b,c){var d=a(c),e=a(b);return d<e?-1:d>e?1:0}))},SelectMany:function(a){var b=new Array;for(var c=0;c<this.items.length;c++)b=b.concat(a(this.items[c]));return new JSLINQ(b)},Count:function(a){return a==null?this.items.length:this.Where(a).items.length},Distinct:function(a){var b,c=new Object,d=new Array;for(var e=0;e<this.items.length;e++)b=a(this.items[e]),c[b]==null&&(c[b]=!0,d[d.length]=b);return c=null,new JSLINQ(d)},Any:function(a){for(var b=0;b<this.items.length;b++)if(a(this.items[b],b))return!0;return!1},All:function(a){for(var b=0;b<this.items.length;b++)if(!a(this.items[b],b))return!1;return!0},Reverse:function(){var a=new Array;for(var b=this.items.length-1;b>-1;b--)a[a.length]=this.items[b];return new JSLINQ(a)},First:function(a){return a!=null?this.Where(a).First():this.items.length>0?this.items[0]:null},Last:function(a){return a!=null?this.Where(a).Last():this.items.length>0?this.items[this.items.length-1]:null},ElementAt:function(a){return this.items[a]},Concat:function(a){var b=a.items||a;return new JSLINQ(this.items.concat(b))},Intersect:function(a,b){var c;b!=undefined?c=b:c=function(a,b,c,d){return a==c};var d=a.items||a,e=new Array;for(var f=0;f<this.items.length;f++)for(var g=0;g<d.length;g++)c(this.items[f],f,d[g],g)&&(e[e.length]=this.items[f]);return new JSLINQ(e)},DefaultIfEmpty:function(a){return this.items.length==0?a:this},ElementAtOrDefault:function(a,b){return a>=0&&a<this.items.length?this.items[a]:b},FirstOrDefault:function(a){return this.First()||a},LastOrDefault:function(a){return this.Last()||a}},JSLINQ.fn.init.prototype=JSLINQ.fn}(),define("jslinq",function(){}),define("alterorder",["jslinq"],function(){var a=$(".product-item-container"),b=a.html(),c=a.children(".product-item").data("flag",+(new Date)),d=c.children(".choose-area"),e=c.find(".show-img img"),f=e.data("src"),g=c.find("[name=number]"),h=c.find(".unit-price"),j=$(".add-product"),k=$(".all-price"),l=$("p.realprice"),m=$("p.postprice"),n=$("p.baseprice"),o=0,p=0,q=0,r=$("#submit-alter-order"),s=r.data("id"),t=r.data("payment"),u=r.data("campaign"),v=r.data("province"),w=r.data("price"),x=function(a){o=a,n.children("strong").text("?? "+o.toFixed(2))},y=function(a){p=a,m.children("strong").text("?? "+p.toFixed(2))},z=function(){q=o+p,l.children("strong").text("?? "+q.toFixed(2))},A=function(){var b={bValidatePass:!0,specsvalues:[]},c=a.children(".product-item"),d={productSpecModels:[],campaignid:u,url:campaignConfig.url};return c.each(function(){var a=$(this),c={};for(var e=0;e<H.length;e++){var f=a.find("[data-category="+H[e]+"].active");if(f.length==0){b.bValidatePass=!1;return}c[H[e]]=f.data("val")}var g=I(c),h={quantity:a.find("input[name=number]").val(),productcode:g[0].productcode};d.productSpecModels.push(h)}),b.specsvalues.push(d),b},B=function(){var a=A();if(a.bValidatePass==0)return!1;$.ajax({url:"_calculateRealdeliverfee",data:{specsvalues:JSON.stringify(a.specsvalues),provinceid:v},type:"get",dataType:"json"}).done(function(a){if(a.code==200){var b=0;for(var c in a.deliverfeeMap)b+=a.deliverfeeMap[c];y(b),z()}else y(0),z()}).fail(function(){y(0),z()})},C=campaignConfig.data.speclist,D=JSLINQ(C);campaignConfig.data.speclist=null;var E={},F={},G={},H=[];d.find(".category-name").each(function(a,b){H.push(b.innerHTML)});var I=function(a){return D.Where(function(b){for(var c in a)if(a[c]!=b[c])return!1;return!0}).ToArray()},J=function(){var a=[],b={};a.push(E);for(var c in F)b={},b[c]=F[c],$.extend(b,E),a.push(b);var d=0;for(var c in F){var e=0;for(var f in F)e>d&&(b={},b[c]=F[c],b[f]=F[f],$.extend(b,E),a.push(b)),e++;d++}return d==3&&(b={},$.extend(b,F,E),a.push(b)),a},K=function(a){var b=[];for(var c=0;c<a.length;c++)for(var d in a[c])d!="stock"&&d!="price"&&d!="images"&&d!="color"&&d!="productcode"&&d!="buyNums"&&b.push(a[c][d]);return JSLINQ(b).Distinct(function(a){return a}).ToArray()},L=function(a,b){var c=JSLINQ(a);for(i=0;i<b.length;i++){var e=c.Where(function(a){for(var c in a)if(a[c]==b[i])return!0;return!1}),f=e.Count(function(a){return a.stock<=0||a.price<=0?!1:!0});f==0?(d.find("[data-val="+b[i]+"]").removeClass("enable active").addClass("disable"),b[i]in F&&delete F[b[i]]):d.find("[data-val="+b[i]+"]").removeClass("disable").addClass("enable")}},M=function(a){var b=I(a),c=K(b);L(b,c)},N=function(){var a=J();for(var b=0;b<a.length;b++)M(a[b])},O=function(a){if(a.data("flag")==c.data("flag"))return;c=a,d=c.children(".choose-area"),e=c.find(".show-img img"),g=c.find("[name=number]"),h=c.find(".unit-price"),E={},F=G={},d.find(".active").each(function(a,b){var c=$(this);F[c.data("category")]=c.data("val")})},P=function(a){var b=JSLINQ(a).Where(function(a){return a.price>0}).Select(function(a){return a.price}).ToArray(),d=Math.min.apply(null,b),e=Math.max.apply(null,b);d==e?(c.data("unitprice",d),h.text(d)):(c.data("unitprice",0),h.text(d+" - "+e))},Q=function(a){var b=f,d=[];if($.isEmptyObject(G))P(C);else if(a.length>0){for(var h=0;h<a.length;h++)a[h].images=JSLINQ(a[h].images).Where(function(a){return!!a}).ToArray(),Array.prototype.push.apply(d,a[h].images);!!d&&d.length>0?b=GlobalConfigUrl.imageRootUrl+"/"+d[0]:b="",P(a),c.data("buynumber",g.val())}e.attr("src",b+".360.png"),R()},R=function(){var a=0;c.siblings(".product-item").addBack().each(function(){var b=$(this),c=b.data("unitprice"),d=b.data("buynumber");a+=parseFloat(c?c:0)*parseFloat(d?d:0)}),x(a),z()};M({}),a.on("mouseenter",".product-item",function(){$(this).addClass("active").siblings(".product-item").removeClass("active")}).on("click",".enable",function(){var a=$(this),b=a.data("category"),c=a.data("val"),d=a.closest(".product-item");O(d),E={},G={},F[b]?(F[b]==c?a.removeClass("active"):(E[b]=c,a.addClass("active").siblings("li").removeClass("active")),delete F[b]):(E[b]=c,a.addClass("active").siblings("li").removeClass("active")),$.extend(G,F,E);var e=I(G);Q(e),N(),$.extend(F,E),B()}).on("click",".minus",function(){var a=$(this).closest(".product-item");O(a);var b=parseFloat(g.val());return b<=1?!1:(g.val(b-1),c.data("buynumber",b-1),R(),B(),!1)}).on("click",".plus",function(){var a=$(this).closest(".product-item");O(a);var b=parseFloat(g.val());return g.val(b+1),c.data("buynumber",b+1),R(),B(),!1}).on("keyup","[name=number]",function(){var a=this.value.replace(/[^\d]/g,"");this.value=a,a&&(a=="0"&&(a=1),this.value=parseInt(a,10))}).on("blur","[name=number]",function(){this.value||(this.value=1);var a=$(this).closest(".product-item");O(a);var b=parseFloat(this.value);c.data("buynumber",b),R(),B()}).on("click",".size-table",function(){var a=$.layer({type:1,title:!1,fix:!1,fadeIn:400,shade:[.3,"#bebebe"],area:["600px","871px"],page:{html:'<img src="'+this.href+'" />'}});return!1}).on("click",".close",function(){var a=$(this).closest(".product-item"),b=a.siblings(".product-item");a.remove(),O(b.eq(0)),b.length==1&&b.each(function(){$(this).children(".close").remove()}),R(),B()}),j.on("click",function(){var d=$(b).data("flag",+(new Date));O(d),a.append(c),c.addClass("active").siblings(".product-item").removeClass("active").addBack().each(function(){$(this).append('<div class="close">')}),M({}),Q({}),B()}),!campaignConfig.param,r.on("click",function(){var b=!0,c=!1,d=a.children(".product-item");layer.closeTips(),d.each(function(){var a=$(this),d,e=[];for(var f=0;f<H.length;f++)d=a.find("[data-category="+H[f]+"].active"),d.length==0&&e.push(H[f]);e.length>0&&(layer.tips("????????? "+e.join("???"),a.children(".choose-area").children("div:eq(3)"),{style:["background-color:#FF9900; color:#fff; border:1px solid #FF9900; left:200px;","#FF9900"],guide:2,time:5,more:!0}),c===!1&&($("html,body").animate({scrollTop:a.offset().top-50},300),c=!0),b=!1)});if(b===!1)return;if(t=="1"&&w!=q){udz.layer.fail("????????????????????????????????????");return}for(var e=0;e<C.length;e++)C[e].buyNums=0;var f=0;d.each(function(){var a=$(this),d=a.find("[name=number]"),e=parseFloat(d.val());f+=e,f>100&&(layer.tips("???????????????????????????",d,{guide:2,time:5,more:!0}),c===!1&&($("html,body").animate({scrollTop:a.offset().top},300),c=!0),b=!1)});if(b===!1)return;d.each(function(){var a=$(this),d=a.find("[name=number]"),e=[],f=[],g={},h={},i=parseFloat(d.val());a.find("li.active").each(function(){var a=$(this);h[a.data("category")]=a.data("val")}),f=I(h),g=f.length>0?f[0]:{stock:0},g.buyNums+=i,g.stock<g.buyNums&&(layer.tips("????????????",d,{guide:2,time:5,more:!0}),c===!1&&($("html,body").animate({scrollTop:a.offset().top},300),c=!0),b=!1)});if(b===!1)return;var g=A();if(g.bValidatePass==0)return!1;udz.layer.load("????????????..."),$.ajax({url:"_saveEditOrder",type:"post",data:{specsvalues:JSON.stringify(g.specsvalues),orderid:s},dataType:"json"}).done(function(a){a.result==0?(udz.layer.ok("????????????"),setTimeout(function(){top.location.reload()},1e3)):udz.layer.fail(a.msg,4)}).fail(function(a){udz.layer.fail("??????????????????????????????")})})}),define("recommendfriends",[],function(){var a=document.getElementById("txt-url");!a||require(["zeroclipboard","udzshare"],function(b,c){var d=document.getElementById("span-copy"),e=new b(document.getElementById("span-copy"),{moviePath:document.getElementById("hid-swfpath").value});e.on("aftercopy",function(a){layer.msg("????????????",2,{type:1,shade:!1})}),e.on("error",function(b){b.name=="flash-disabled"&&$(d).on("click",function(){layer.alert("?????????????????????????????????????????????????????????<br/>"+a.value)})}),c([""],"",a.value,campaignConfig.title,campaignConfig.title,campaignConfig.title);var f=$("#qrcode");$("#shareWechat").on("mouseenter",function(){f.length>0&&f.attr("src").indexOf("pixel.gif")>-1&&$.ajax({url:"_recommendQrcode",type:"post",dataType:"json"}).done(function(a){a.code==200&&f.attr("src",a.data.url)}).fail(function(a){}).always(function(){}),f.show()}).on("mouseleave",function(){f.hide()})}),$(".list-container").on("click",".more-act",function(){var a=$(this),b=a.closest("tbody"),c=b.data("url"),d='<tr class="tr-item">\n                       <td>&nbsp;</td>\n                       <td>&nbsp;</td>\n                       <td><a class="url" href="{url1}">udz.com/{url2}</a></td>\n                       <td class="txt-fail">{sale}</td>\n                       <td>{goal}</td>\n                   </tr>';$.ajax({url:"_showUrls",data:{username:b.data("name")},type:"get",dataType:"json"}).done(function(e){if(e.code==200){for(var f=0;f<e.data.length;f++){if(c==e.data[f][0])continue;b.append(d.replace("{url1}",GlobalConfigUrl.indexUrl+"/"+e.data[f][0]).replace("{url2}",e.data[f][0]).replace("{sale}",e.data[f][1]).replace("{goal}",e.data[f][2]))}a.remove()}}).fail(function(){})})}),define("focusshop",[],function(){var a=$(".shop-container"),b=a.offset().top,c=$(".loading"),d=$(window),e=$(document.body),f=d.height(),g=1,h=1,i=10,j='<a href="{camurl}" class="cmp-item">\n                        <img width="120" height="120" src="{camimgsrc}" />\n                    </a>',k='<div class="shop-item">\n                        <div class="shop-head">\n                            <span class="photo">\n                                <img width="45" height="45" src="{shopimgsrc}">\n                            </span>\n                            <span class="name ohe">{shopname}</span>\n                            <a class="enter" target="_blank" href="{shopurl}">????????????</a>\n                        </div>\n                        <div class="shop-ct">{camhtml}</div>\n                        <div class="cmp-txt">??????????????????{cmpnums}?????????</div>\n                    </div>',l=function(a,b,c){var d="";if(a.data.length>0){var e;for(var f=0;f<a.data.length;f++)e=a.data[f],d+=m(e)}else d='<div class="no-data">???????????????????????????</div>';b.append(d)},m=function(a){var b="";for(var c=0;c<a.list.length;c++)b+=j.replace("{camurl}",GlobalConfigUrl.indexUrl+"/"+a.list[c].url).replace("{camimgsrc}",GlobalConfigUrl.imageRootUrl+"/"+a.list[c].image1+".360.png");return k.replace("{shopimgsrc}",GlobalConfigUrl.imageRootUrl+"/"+(a.photo?a.photo:"statics/udz/images/thumb.png")).replace("{shopname}",a.name?a.name:a.username).replace("{shopurl}",GlobalConfigUrl.indexUrl+"/_shop?storeid="+a.storeid).replace("{cmpnums}",a.campaignnum).replace("{camhtml}",b)},n=function(b){$.ajax({url:"_attentionstorelist",data:b,type:"get",dataType:"json",cache:!1}).done(function(b){b.code==200?(l(b,a,b.currentPage),g+=1,h=b.totalPage,c.hide()):b.code==501&&udz.layer.fail("?????????????????????")}).always(function(b){a.data("loadstatus","ready")})};d.on("scroll",function(){g<=h&&a.data("loadstatus")!="loading"&&b+a.height()-d.scrollTop()-d.height()<200&&(a.data("loadstatus","loading"),c.show(),n({currentPage:g,pageSize:i}))}).trigger("scroll")}),!function(a,b){var c,d,e="/dzwindFront/static/",f={getPath:function(){var a=document.scripts,b=a[a.length-1].src;return e?e:b.substring(0,b.lastIndexOf("/")+1)},type:["dialog","page","iframe","loading","tips"]};a.layer={v:"1.8.5",ie6:!!a.ActiveXObject&&!a.XMLHttpRequest,index:0,path:f.getPath(),use:function(a,b){var d=c("head")[0],a=a.replace(/\s/g,""),e=/\.css$/.test(a),f=document.createElement(e?"link":"script"),g=a.replace(/\.|\//g,"");e&&(f.type="text/css",f.rel="stylesheet"),f[e?"href":"src"]=/^http:\/\//.test(a)?a:layer.path+a,f.id=g,c("#"+g)[0]||d.appendChild(f),b&&(document.all?c(f).ready(b):c(f).load(b))},alert:function(a,b,d,e){var f="function"==typeof d,g={dialog:{msg:a,type:b,yes:f?d:e},area:["auto","auto"]};return f||(g.title=d),c.layer(g)},confirm:function(a,b,d,e){var f="function"==typeof d,g={dialog:{msg:a,type:4,btns:2,yes:b,no:f?d:e}};return f||(g.title=d),c.layer(g)},msg:function(a,d,e,f){var g={title:!1,closeBtn:!1,time:d===b?2:d,dialog:{msg:""===a||a===b?"&nbsp;":a},end:f};return"object"==typeof e?(g.dialog.type=e.type,g.shade=e.shade,g.shift=e.rate):"function"==typeof e?g.end=e:g.dialog.type=e,c.layer(g)},load:function(a,b){return"string"==typeof a?layer.msg(a,b||0,16):c.layer({time:a,loading:{type:b},bgcolor:b?"#fff":"",shade:b?[.1,"#000"]:[0],border:3!==b&&b?[6,.3,"#000"]:[0],type:3,title:["",!1],closeBtn:[0,!1]})},tips:function(a,b,d,e,f,g){var h={type:4,shade:!1,success:function(a){this.closeBtn||a.find(".xubox_tips").css({"padding-right":10})},bgcolor:"",tips:{msg:a,follow:b}};return h.time="object"==typeof d?d.time:0|d,d=d||{},h.closeBtn=d.closeBtn||!1,h.maxWidth=d.maxWidth||e,h.tips.guide=d.guide||f,h.tips.style=d.style||g,h.tips.more=d.more,c.layer(h)}};var g=["xubox_layer","xubox_iframe",".xubox_title",".xubox_text",".xubox_page",".xubox_main"],h=function(a){var b=this,d=b.config;layer.index++,b.index=layer.index,b.config=c.extend({},d,a),b.config.dialog=c.extend({},d.dialog,a.dialog),b.config.page=c.extend({},d.page,a.page),b.config.iframe=c.extend({},d.iframe,a.iframe),b.config.loading=c.extend({},d.loading,a.loading),b.config.tips=c.extend({},d.tips,a.tips),b.creat()};h.pt=h.prototype,h.pt.config={type:0,shade:[.1,"#333"],fix:!0,move:".xubox_title",title:"&#x4FE1;&#x606F;",offset:["","50%"],area:["310px","auto"],closeBtn:[0,!0],time:0,bgcolor:"#fff",border:[6,.3,"#000"],zIndex:19891014,maxWidth:400,dialog:{btns:1,btn:["&#x786E;&#x5B9A;","&#x53D6;&#x6D88;"],type:8,msg:"",yes:function(a){layer.close(a)},no:function(a){layer.close(a)}},page:{dom:"#xulayer",html:"",url:""},iframe:{src:"http://sentsin.com",scrolling:"auto"},loading:{type:0},tips:{msg:"",follow:"",guide:0,isGuide:!0,style:["background-color:#FF9900; color:#fff;","#FF9900"]},success:function(){},close:function(a){layer.close(a)},end:function(){}},h.pt.space=function(a){var b=this,a=a||"",c=b.index,d=b.config,e=d.dialog,f=-1===e.type?"":'<span class="xubox_msg xulayer_png32 xubox_msgico xubox_msgtype'+e.type+'"></span>',h=['<div class="xubox_dialog">'+f+'<span class="xubox_msg xubox_text" style="'+(f?"":"padding-left:20px")+'">'+e.msg+"</span></div>",'<div class="xubox_page">'+a+"</div>",'<iframe scrolling="'+d.iframe.scrolling+'" allowtransparency="true" id="'+g[1]+c+'" name="'+g[1]+c+'" onload="this.className=\''+g[1]+'\'" class="'+g[1]+'" frameborder="0" src="'+d.iframe.src+'"></iframe>','<span class="xubox_loading xubox_loading_'+d.loading.type+'"></span>','<div class="xubox_tips" style="'+d.tips.style[0]+'"><div class="xubox_tipsMsg">'+d.tips.msg+'</div><i class="layerTipsG"></i></div>'],i="",j="",k=d.zIndex+c,l="z-index:"+k+"; background-color:"+d.shade[1]+"; opacity:"+d.shade[0]+"; filter:alpha(opacity="+100*d.shade[0]+");";d.shade[0]&&(i='<div times="'+c+'" id="xubox_shade'+c+'" class="xubox_shade" style="'+l+'"></div>'),d.zIndex=k;var m="",n="",o="z-index:"+(k-1)+";  background-color: "+d.border[2]+"; opacity:"+d.border[1]+"; filter:alpha(opacity="+100*d.border[1]+"); top:-"+d.border[0]+"px; left:-"+d.border[0]+"px;";d.border[0]&&(j='<div id="xubox_border'+c+'" class="xubox_border" style="'+o+'"></div>'),!d.maxmin||1!==d.type&&2!==d.type||/^\d+%$/.test(d.area[0])&&/^\d+%$/.test(d.area[1])||(n='<a class="xubox_min" href="javascript:;"><cite></cite></a><a class="xubox_max xulayer_png32" href="javascript:;"></a>'),d.closeBtn[1]&&(n+='<a class="xubox_close xulayer_png32 xubox_close'+d.closeBtn[0]+'" href="javascript:;" style="'+(4===d.type?"position:absolute; right:-3px; _right:7px; top:-4px;":"")+'"></a>');var p="object"==typeof d.title;return d.title&&(m='<div class="xubox_title" style="'+(p?d.title[1]:"")+'"><em>'+(p?d.title[0]:d.title)+"</em></div>"),[i,'<div times="'+c+'" showtime="'+d.time+'" style="z-index:'+k+'" id="'+g[0]+c+'" class="'+g[0]+'"><div style="background-color:'+d.bgcolor+"; z-index:"+k+'" class="xubox_main">'+h[d.type]+m+'<span class="xubox_setwin">'+n+'</span><span class="xubox_botton"></span></div>'+j+"</div>"]},h.pt.creat=function(){var a=this,b="",d=a.config,e=d.dialog,f=a.index,h=d.page,i=c("body"),j=function(d){var d=d||"";b=a.space(d),i.append(c(b[0]))};switch(d.type){case 0:d.title||(d.area=["auto","auto"]),c(".xubox_dialog")[0]&&layer.close(c(".xubox_dialog").parents("."+g[0]).attr("times"));break;case 1:if(""!==h.html)j('<div class="xuboxPageHtml">'+h.html+"</div>"),i.append(c(b[1]));else if(""!==h.url)j('<div class="xuboxPageHtml" id="xuboxPageHtml'+f+'">'+h.html+"</div>"),i.append(c(b[1])),c.get(h.url,function(a){c("#xuboxPageHtml"+f).html(a.toString()),h.ok&&h.ok(a)});else{if(0!=c(h.dom).parents(g[4]).length)return;j(),c(h.dom).show().wrap(c(b[1]))}break;case 3:d.title=!1,d.area=["auto","auto"],d.closeBtn=["",!1],c(".xubox_loading")[0]&&layer.closeLoad();break;case 4:d.title=!1,d.area=["auto","auto"],d.fix=!1,d.border=[0],d.tips.more||layer.closeTips()}1!==d.type&&(j(),i.append(c(b[1])));var k=a.layerE=c("#"+g[0]+f);if(k.css({width:d.area[0],height:d.area[1]}),d.fix||k.css({position:"absolute"}),d.title&&(3!==d.type||4!==d.type)){var l=0===d.type?e:d,m=k.find(".xubox_botton");switch(l.btn=d.btn||e.btn,l.btns){case 0:m.html("").hide();break;case 1:m.html('<a href="javascript:;" class="xubox_yes xubox_botton1">'+l.btn[0]+"</a>");break;case 2:m.html('<a href="javascript:;" class="xubox_yes xubox_botton2">'+l.btn[0]+'</a><a href="javascript:;" class="xubox_no xubox_botton3">'+l.btn[1]+"</a>")}}"auto"===k.css("left")?(k.hide(),setTimeout(function(){k.show(),a.set(f)},500)):a.set(f),d.time<=0||a.autoclose(),a.callback()},f.fade=function(a,b,c){a.css({opacity:0}).animate({opacity:c},b)},h.pt.offset=function(){var a=this,b=a.config,c=a.layerE,e=c.outerHeight();a.offsetTop=""===b.offset[0]&&e<d.height()?(d.height()-e-2*b.border[0])/2:-1!=b.offset[0].indexOf("px")?parseFloat(b.offset[0]):parseFloat(b.offset[0]||0)/100*d.height(),a.offsetTop=a.offsetTop+b.border[0]+(b.fix?0:d.scrollTop()),-1!=b.offset[1].indexOf("px")?a.offsetLeft=parseFloat(b.offset[1])+b.border[0]:(b.offset[1]=""===b.offset[1]?"50%":b.offset[1],a.offsetLeft="50%"===b.offset[1]?b.offset[1]:parseFloat(b.offset[1])/100*d.width()+b.border[0])},h.pt.set=function(a){var b=this,e=b.config,h=(e.dialog,e.page),i=(e.loading,b.layerE),j=i.find(g[2]);switch(b.autoArea(a),e.title?0===e.type&&layer.ie6&&j.css({width:i.outerWidth()}):4!==e.type&&i.find(".xubox_close").addClass("xubox_close1"),i.attr({type:f.type[e.type]}),b.offset(),4!==e.type&&(e.shift&&!layer.ie6?"object"==typeof e.shift?b.shift(e.shift[0],e.shift[1]||500,e.shift[2]):b.shift(e.shift,500):i.css({top:b.offsetTop,left:b.offsetLeft})),e.type){case 0:i.find(g[5]).css({"background-color":"#fff"}),e.title?i.find(g[3]).css({paddingTop:18+j.outerHeight()}):(i.find(".xubox_msgico").css({top:8}),i.find(g[3]).css({marginTop:11}));break;case 1:i.find(h.dom).addClass("layer_pageContent"),e.shade[0]&&i.css({zIndex:e.zIndex+1}),e.title&&i.find(g[4]).css({top:j.outerHeight()});break;case 2:var k=i.find("."+g[1]),l=i.height();k.addClass("xubox_load").css({width:i.width()}),k.css(e.title?{top:j.height(),height:l-j.height()}:{top:0,height:l}),layer.ie6&&k.attr("src",e.iframe.src);break;case 4:var m=[0,i.outerHeight()],n=c(e.tips.follow),o={width:n.outerWidth(),height:n.outerHeight(),top:n.offset().top,left:n.offset().left},p=i.find(".layerTipsG");e.tips.isGuide||p.remove(),i.outerWidth()>e.maxWidth&&i.width(e.maxWidth),o.tipColor=e.tips.style[1],m[0]=i.outerWidth(),o.autoLeft=function(){o.left+m[0]-d.width()>0?(o.tipLeft=o.left+o.width-m[0],p.css({right:12,left:"auto"})):o.tipLeft=o.left},o.where=[function(){o.autoLeft(),o.tipTop=o.top-m[1]-10,p.removeClass("layerTipsB").addClass("layerTipsT").css({"border-right-color":o.tipColor})},function(){o.tipLeft=o.left+o.width+10,o.tipTop=o.top,p.removeClass("layerTipsL").addClass("layerTipsR").css({"border-bottom-color":o.tipColor})},function(){o.autoLeft(),o.tipTop=o.top+o.height+10,p.removeClass("layerTipsT").addClass("layerTipsB").css({"border-right-color":o.tipColor})},function(){o.tipLeft=o.left-m[0]+10,o.tipTop=o.top,p.removeClass("layerTipsR").addClass("layerTipsL").css({"border-bottom-color":o.tipColor})}],o.where[e.tips.guide](),0===e.tips.guide?o.top-(d.scrollTop()+m[1]+16)<0&&o.where[2]():1===e.tips.guide?d.width()-(o.left+o.width+m[0]+16)>0||o.where[3]():2===e.tips.guide?o.top-d.scrollTop()+o.height+m[1]+16-d.height()>0&&o.where[0]():3===e.tips.guide?m[0]+16-o.left>0&&o.where[1]():4===e.tips.guide,i.css({left:o.tipLeft,top:o.tipTop})}e.fadeIn&&(f.fade(i,e.fadeIn,1),f.fade(c("#xubox_shade"+a),e.fadeIn,e.shade[0])),e.fix&&""===e.offset[0]&&!e.shift&&d.on("resize",function(){i.css({top:(d.height()-i.outerHeight())/2})}),b.move()},h.pt.shift=function(a,b,c){var e=this,f=e.config,g=e.layerE,h=0,i=d.width(),j=d.height()+(f.fix?0:d.scrollTop());h="50%"==f.offset[1]||""==f.offset[1]?g.outerWidth()/2:g.outerWidth();var k={t:{top:e.offsetTop},b:{top:j-g.outerHeight()-f.border[0]},cl:h+f.border[0],ct:-g.outerHeight(),cr:i-h-f.border[0]};switch(a){case"left-top":g.css({left:k.cl,top:k.ct}).animate(k.t,b);break;case"top":g.css({top:k.ct}).animate(k.t,b);break;case"right-top":g.css({left:k.cr,top:k.ct}).animate(k.t,b);break;case"right-bottom":g.css({left:k.cr,top:j}).animate(c?k.t:k.b,b);break;case"bottom":g.css({top:j}).animate(c?k.t:k.b,b);break;case"left-bottom":g.css({left:k.cl,top:j}).animate(c?k.t:k.b,b);break;case"left":g.css({left:-g.outerWidth()}).animate({left:e.offsetLeft},b)}},h.pt.autoArea=function(a){var b,d=this,a=a||d.index,e=d.config,f=e.page,h=c("#"+g[0]+a),i=h.find(g[2]),j=h.find(g[5]),k=e.title?i.innerHeight():0,l=0;switch("auto"===e.area[0]&&j.outerWidth()>=e.maxWidth&&h.css({width:e.maxWidth}),e.type){case 0:var m=h.find(".xubox_botton>a");b=h.find(g[3]).outerHeight()+20,m.length>0&&(l=m.outerHeight()+20);break;case 1:var n=h.find(g[4]);b=c(f.dom).outerHeight(),"auto"===e.area[0]&&h.css({width:n.outerWidth()}),(""!==f.html||""!==f.url)&&(b=n.outerHeight());break;case 2:h.find("iframe").css({width:h.outerWidth(),height:h.outerHeight()-(e.title?i.innerHeight():0)});break;case 3:var o=h.find(".xubox_loading");b=o.outerHeight(),j.css({width:o.width()})}"auto"===e.area[1]&&j.css({height:k+b+l}),c("#xubox_border"+a).css({width:h.outerWidth()+2*e.border[0],height:h.outerHeight()+2*e.border[0]}),layer.ie6&&"auto"!==e.area[0]&&j.css({width:h.outerWidth()}),h.css("50%"!==e.offset[1]&&""!=e.offset[1]||4===e.type?{marginLeft:0}:{marginLeft:-h.outerWidth()/2})},h.pt.move=function(){var a=this,b=a.config,e={setY:0,moveLayer:function(){if(0==parseInt(e.layerE.css("margin-left")))var a=parseInt(e.move.css("left"));else var a=parseInt(e.move.css("left"))+ -parseInt(e.layerE.css("margin-left"));"fixed"!==e.layerE.css("position")&&(a-=e.layerE.parent().offset().left,e.setY=0),e.layerE.css({left:a,top:parseInt(e.move.css("top"))-e.setY})}},f=a.layerE.find(b.move);b.move&&f.attr("move","ok"),f.css(b.move?{cursor:"move"}:{cursor:"auto"}),c(b.move).on("mousedown",function(a){if(a.preventDefault(),"ok"===c(this).attr("move")){e.ismove=!0,e.layerE=c(this).parents("."+g[0]);var f=e.layerE.offset().left,h=e.layerE.offset().top,i=e.layerE.width()-6,j=e.layerE.height()-6;c("#xubox_moves")[0]||c("body").append('<div id="xubox_moves" class="xubox_moves" style="left:'+f+"px; top:"+h+"px; width:"+i+"px; height:"+j+'px; z-index:2147483584"></div>'),e.move=c("#xubox_moves"),b.moveType&&e.move.css({opacity:0}),e.moveX=a.pageX-e.move.position().left,e.moveY=a.pageY-e.move.position().top,"fixed"!==e.layerE.css("position")||(e.setY=d.scrollTop())}}),c(document).mousemove(function(a){if(e.ismove){var c=a.pageX-e.moveX,f=a.pageY-e.moveY;if(a.preventDefault(),!b.moveOut){e.setY=d.scrollTop();var g=d.width()-e.move.outerWidth()-b.border[0],h=b.border[0]+e.setY;c<b.border[0]&&(c=b.border[0]),c>g&&(c=g),h>f&&(f=h),f>d.height()-e.move.outerHeight()-b.border[0]+e.setY&&(f=d.height()-e.move.outerHeight()-b.border[0]+e.setY)}e.move.css({left:c,top:f}),b.moveType&&e.moveLayer(),c=null,f=null,g=null,h=null}}).mouseup(function(){try{e.ismove&&(e.moveLayer(),e.move.remove()),e.ismove=!1}catch(a){e.ismove=!1}b.moveEnd&&b.moveEnd()})},h.pt.autoclose=function(){var a=this,b=a.config.time,c=function(){b--,0===b&&(layer.close(a.index),clearInterval(a.autotime))};a.autotime=setInterval(c,1e3)},f.config={end:{}},h.pt.callback=function(){var a=this,b=a.layerE,d=a.config,e=d.dialog;a.openLayer(),a.config.success(b),layer.ie6&&a.IE6(b),b.find(".xubox_close").on("click",function(){d.close(a.index),layer.close(a.index)}),b.find(".xubox_yes").on("click",function(){d.yes?d.yes(a.index):e.yes(a.index)}),b.find(".xubox_no").on("click",function(){d.no?d.no(a.index):e.no(a.index),layer.close(a.index)}),a.config.shadeClose&&c("#xubox_shade"+a.index).on("click",function(){layer.close(a.index)}),b.find(".xubox_min").on("click",function(){layer.min(a.index,d),d.min&&d.min(b)}),b.find(".xubox_max").on("click",function(){c(this).hasClass("xubox_maxmin")?(layer.restore(a.index),d.restore&&d.restore(b)):(layer.full(a.index,d),d.full&&d.full(b))}),f.config.end[a.index]=d.end},f.reselect=function(){c.each(c("select"),function(){var a=c(this);a.parents("."+g[0])[0]||1==a.attr("layer")&&c("."+g[0]).length<1&&a.removeAttr("layer").show(),a=null})},h.pt.IE6=function(a){var b=this,e=a.offset().top;if(b.config.fix)var f=function(){a.css({top:d.scrollTop()+e})};else var f=function(){a.css({top:e})};f(),d.scroll(f),c.each(c("select"),function(){var a=c(this);a.parents("."+g[0])[0]||"none"==a.css("display")||a.attr({layer:"1"}).hide(),a=null})},h.pt.openLayer=function(){var a=this;a.layerE,layer.autoArea=function(b){return a.autoArea(b)},layer.shift=function(b,c,d){a.shift(b,c,d)},layer.setMove=function(){return a.move()},layer.zIndex=a.config.zIndex,layer.setTop=function(a){var b=function(){layer.zIndex++,a.css("z-index",layer.zIndex+1)};return layer.zIndex=parseInt(a[0].style.zIndex),a.on("mousedown",b),layer.zIndex}},f.isauto=function(a,b,c){"auto"===b.area[0]&&(b.area[0]=a.outerWidth()),"auto"===b.area[1]&&(b.area[1]=a.outerHeight()),a.attr({area:b.area+","+c}),a.find(".xubox_max").addClass("xubox_maxmin")},f.rescollbar=function(a){g.html.attr("layer-full")==a&&(g.html[0].style.removeProperty?g.html[0].style.removeProperty("overflow"):g.html[0].style.removeAttribute("overflow"),g.html.removeAttr("layer-full"))},layer.getIndex=function(a){return c(a).parents("."+g[0]).attr("times")},layer.getChildFrame=function(a,b){return b=b||c("."+g[1]).parents("."+g[0]).attr("times"),c("#"+g[0]+b).find("."+g[1]).contents().find(a)},layer.getFrameIndex=function(a){return c(a?"#"+a:"."+g[1]).parents("."+g[0]).attr("times")},layer.iframeAuto=function(a){a=a||c("."+g[1]).parents("."+g[0]).attr("times");var b=layer.getChildFrame("body",a).outerHeight(),d=c("#"+g[0]+a),e=d.find(g[2]),f=0;e&&(f=e.height()),d.css({height:b+f});var h=-parseInt(c("#xubox_border"+a).css("top"));c("#xubox_border"+a).css({height:b+2*h+f}),c("#"+g[1]+a).css({height:b})},layer.iframeSrc=function(a,b){c("#"+g[0]+a).find("iframe").attr("src",b)},layer.area=function(a,b){var d=[c("#"+g[0]+a),c("#xubox_border"+a)],e=d[0].attr("type"),h=d[0].find(g[5]),i=d[0].find(g[2]);if(e===f.type[1]||e===f.type[2]){if(d[0].css(b),h.css({width:b.width,height:b.height}),e===f.type[2]){var j=d[0].find("iframe");j.css({width:b.width,height:i?b.height-i.innerHeight():b.height})}"0px"!==d[0].css("margin-left")&&(b.hasOwnProperty("top")&&d[0].css({top:b.top-(d[1][0]?parseFloat(d[1].css("top")):0)}),b.hasOwnProperty("left")&&d[0].css({left:b.left+d[0].outerWidth()/2-(d[1][0]?parseFloat(d[1].css("left")):0)}),d[0].css({marginLeft:-d[0].outerWidth()/2})),d[1][0]&&d[1].css({width:parseFloat(b.width)-2*parseFloat(d[1].css("left")),height:parseFloat(b.height)-2*parseFloat(d[1].css("top"))})}},layer.min=function(a,b){var d=c("#"+g[0]+a),e=[d.position().top,d.position().left+parseFloat(d.css("margin-left"))];f.isauto(d,b,e),layer.area(a,{width:180,height:35}),d.find(".xubox_min").hide(),"page"===d.attr("type")&&d.find(g[4]).hide(),f.rescollbar(a)},layer.restore=function(a){var b=c("#"+g[0]+a),d=b.attr("area").split(",");b.attr("type"),layer.area(a,{width:parseFloat(d[0]),height:parseFloat(d[1]),top:parseFloat(d[2]),left:parseFloat(d[3])}),b.find(".xubox_max").removeClass("xubox_maxmin"),b.find(".xubox_min").show(),"page"===b.attr("type")&&b.find(g[4]).show(),f.rescollbar(a)},layer.full=function(a,b){var e,h=c("#"+g[0]+a),i=2*b.border[0]||6,j=[h.position().top,h.position().left+parseFloat(h.css("margin-left"))];f.isauto(h,b,j),g.html.attr("layer-full")||g.html.css("overflow","hidden").attr("layer-full",a),clearTimeout(e),e=setTimeout(function(){layer.area(a,{top:"fixed"===h.css("position")?0:d.scrollTop(),left:"fixed"===h.css("position")?0:d.scrollLeft(),width:d.width()-i,height:d.height()-i})},100)},layer.title=function(a,b){var d=c("#"+g[0]+(b||layer.index)).find(".xubox_title>em");d.html(a)},layer.close=function(a){var b=c("#"+g[0]+a),d=b.attr("type"),e=c("#xubox_moves, #xubox_shade"+a);if(b[0]){if(d==f.type[1])if(b.find(".xuboxPageHtml")[0])b[0].innerHTML="",b.remove();else{b.find(".xubox_setwin,.xubox_close,.xubox_botton,.xubox_title,.xubox_border").remove();for(var h=0;3>h;h++)b.find(".layer_pageContent").unwrap().hide()}else b[0].innerHTML="",b.remove();e.remove(),layer.ie6&&f.reselect(),f.rescollbar(a),"function"==typeof f.config.end[a]&&f.config.end[a](),delete f.config.end[a]}},layer.closeLoad=function(){layer.close(c(".xubox_loading").parents("."+g[0]).attr("times"))},layer.closeTips=function(){layer.closeAll("tips")},layer.closeAll=function(a){c.each(c("."+g[0]),function(){var b=c(this),d=a?b.attr("type")===a:1;d&&layer.close(b.attr("times")),d=null})},f.run=function(){c=jQuery,d=c(a),g.html=c("html"),c.layer=function(a){var b=new h(a);return b.index}},f.run()}(window),define("layer",function(){}),define("salesdata",["echarts","jquery","WdatePicker","layer"],function(ec){function search(isfirst){function dataover(){linksize++,linksize===oncelinksize&&(layer.closeAll(),linksize=0)}function fngetdata(url,next){layer.load("???????????????......",0),$.ajax({url:url,data:data,success:function(data){dataover(),data&&!!eval(data)?next(data):fnmsg(aError[0],0)},error:function(){dataover(),fnmsg("??????????????????????????????...",0)}})}function fnChangetable(a,b){function c(b,c){var d=b?b:"?????????";data=c?c:a[0];var e={tooltip:{trigger:"axis"},xAxis:[{type:"category",data:f}],yAxis:[{type:"value"}],series:[{name:d,type:"line",data:data,markPoint:{data:[{type:"max",name:"?????????"},{type:"min",name:"?????????"}]}}]};return e}function d(){return(j.getTime()-i.getTime())/1e3/3600/24+1}function e(b,c){var d=b?b:"?????????";data=c?c:a[0];var e={tooltip:{trigger:"axis"},xAxis:[{type:"category",data:k}],yAxis:[{type:"value"}],series:[{name:d,type:"line",data:data,markPoint:{data:[{type:"max",name:"?????????"},{type:"min",name:"?????????"}]}}]};return e}var f=[];for(var g=0;g<24;g++){var h="";g<10?h="0"+g:h=g,f.push(h)}var i=(new Date(beginTime)).getTime(),j=(new Date(endTime)).getTime(),k=[],l=(j-i)/1e3/3600/24+1,m=21,n=864e5;l>21?n=parseInt((j-i)/(m-1)):m=l;var o=i;for(var g=0;g<m-1;g++){var p=(new Date(o)).getMonth()+1<10?"0"+((new Date(o)).getMonth()+1):(new Date(o)).getMonth()+1,h=p+"-"+(new Date(o)).getDate();o+=n,k.push(h)}k.push(endTime.substring(5));if(b===1){var q=ec.init($(".tablepart1")[0]);q.setOption(c())}if(b===2){var r=ec.init($(".tablepart2")[0]);r.setOption(e())}$(".zqcn_salesdata").on("click",".listone",function(){if($(this).parent().find(".tablepart1").length&&b===1){var d=$(this).find("span").html(),f=$(this).index();$(".menutable").eq(0).find(".listone").removeClass("act").eq(f).addClass("act"),q.clear(),q.setOption(c(d,a[f]))}if($(this).parent().find(".tablepart2").length&&b===2){var d=$(this).find("span").html(),f=$(this).index();$(".menutable").eq(1).find(".listone").removeClass("act").eq(f).addClass("act"),r.clear(),r.setOption(e(d,a[f]))}})}isfirst=typeof isfirst=="boolean";var campaignid=$("#campaignid").val(),iscampaign=campaignid!=="",beginTime=$("#d4311").val(),endTime=$("#d4312").val(),fnmsg=function(){layer.msg.apply(layer,arguments),$(".xubox_shade").one("click",function(){layer.closeAll()})};void function(){$(".listone em,.salesanalysis span").html("-"),$(".menutable").eq(0).find(".listone").removeClass("act").eq(0).addClass("act"),$(".menutable").eq(1).find(".listone").removeClass("act").eq(0).addClass("act")}(),isfirst&&(iscampaign?($(".ing").show(),$.ajax({url:"_sellingStage?campaignId="+campaignid,success:function(data){var data=eval(data);$(".jindu").css("width",data.saled?data.saled<=data.goal?250*data.saled/data.goal:250:2),$(".ing span").eq(0).html(data.saled).next().html(data.goal),$(".timespace .timebegin").text(data.campaignUpDate),$(".timespace .timeend").text(data.campaignFinishDate)}})):$(".ing").hide());var data={querySubject:iscampaign?"campaign":"store",beginTime:beginTime,endTime:endTime,campaignId:campaignid},linksize=0,oncelinksize=isfirst?6:3;isfirst&&(fngetdata("_uv",function(a){$(".card").eq(0).find("p span").html(a.campaignUv!==undefined?a.campaignUv:aError[0]),$(".card").eq(0).find(".bg span").html(a.allCampaignUv!==undefined?a.allCampaignUv:aError[0])}),fngetdata("_paymentAmount",function(a){$(".card").eq(1).find("p span").html(a.paidOrderPrice!==undefined?a.paidOrderPrice:aError[0]),$(".card").eq(1).find(".bg span").html(a.allPaidOrderPrice!==undefined?a.allPaidOrderPrice:aError[0])}),fngetdata("_orderRate",function(a){$(".card").eq(2).find("p span").html(a.orderRate!==undefined?a.orderRate:aError[0]),$(".card").eq(2).find(".bg span").html(a.allOrderRate!==undefined?a.allOrderRate:aError[0])})),fngetdata("_trafficAndConver",function(a){var b=["campaignUv","campaignPv","paidOrderPrice","orderCount","paidRate"],c=["campaignUvArray","campaignPvArray","paidOrderPriceArray","orderCountArray","paidRateArray"],d=[];for(var e=0;e<b.length;e++)$(".menutable").eq(0).find(".listone").eq(e).find("em").html(a[b[e]]),d.push(a[c[e]]);$.each(d[4],function(a,b){d[4][a]=parseInt(d[4][a])/100}),fnChangetable(d,1)}),fngetdata("_sellingAnalysis",function(a){var b=["MCottonRdNeckTshirt","FCottonRdNeckTshirt","MComfortRdNeckTshirt","FComfortRdNeckTshirt","MVNeckTshirt","MFleece","FPolo","MPolo"],c=["PC","WIFI","PaidVisitor","UnpaidVisitor"],d=0,e="<tr>";$.each(a.DesignDistribution,function(a,b){d%2===0&&d!==0&&(e+="</tr><tr>"),e+="<td>"+a+"</td><td><span>"+b+"</td></span>",d++}),e+="</tr>",$(".styleana").eq(0).html(e),$.each(c,function(b,c){$(".styleone").eq(1).find("span").eq(b).html(a.FlowStructure[c])})}),fngetdata("_visitorQuality",function(a){var b=["bounceRate","orderAvePrice","pageViewsPerCapita","uvValue","orderAveUnit"],c=["bounceRateArray","orderAvePriceArray","pageViewsPerCapitaArray","uvValueArray","orderAveUnitArray"],d=[];for(var e=0;e<b.length;e++)$(".menutable").eq(1).find(".listone").eq(e).find("em").html(a[b[e]]),d.push(a[c[e]]);$.each(d[0],function(a,b){d[0][a]=parseInt(d[0][a])/100}),$.each(d[4],function(a,b){d[4][a]=parseInt(d[4][a])/100}),fnChangetable(d,2)})}var aError=["????????????"];search(!0),$("#campaignid").on("change",function(){search(!0)}),$(".searchbtn").on("click",search)}),function(){function a(a){function b(b,c,d,e,f,g){for(;f>=0&&g>f;f+=a){var h=e?e[f]:f;d=c(d,b[h],h,b)}return d}return function(c,d,e,f){d=t(d,f,4);var g=!A(c)&&s.keys(c),h=(g||c).length,i=a>0?0:h-1;return arguments.length<3&&(e=c[g?g[i]:i],i+=a),b(c,d,e,g,i,h)}}function b(a){return function(b,c,d){c=u(c,d);for(var e=z(b),f=a>0?0:e-1;f>=0&&e>f;f+=a)if(c(b[f],f,b))return f;return-1}}function c(a,b,c){return function(d,e,f){var g=0,h=z(d);if("number"==typeof f)a>0?g=f>=0?f:Math.max(f+h,g):h=f>=0?Math.min(f+1,h):f+h+1;else if(c&&f&&h)return f=c(d,e),d[f]===e?f:-1;if(e!==e)return f=b(k.call(d,g,h),s.isNaN),f>=0?f+g:-1;for(f=a>0?g:h-1;f>=0&&h>f;f+=a)if(d[f]===e)return f;return-1}}function d(a,b){var c=F.length,d=a.constructor,e=s.isFunction(d)&&d.prototype||h,f="constructor";for(s.has(a,f)&&!s.contains(b,f)&&b.push(f);c--;)f=F[c],f in a&&a[f]!==e[f]&&!s.contains(b,f)&&b.push(f)}var e=this,f=e._,g=Array.prototype,h=Object.prototype,i=Function.prototype,j=g.push,k=g.slice,l=h.toString,m=h.hasOwnProperty,n=Array.isArray,o=Object.keys,p=i.bind,q=Object.create,r=function(){},s=function(a){return a instanceof s?a:this instanceof s?void (this._wrapped=a):new s(a)};"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=s),exports._=s):e._=s,s.VERSION="1.8.3";var t=function(a,b,c){if(b===void 0)return a;switch(null==c?3:c){case 1:return function(c){return a.call(b,c)};case 2:return function(c,d){return a.call(b,c,d)};case 3:return function(c,d,e){return a.call(b,c,d,e)};case 4:return function(c,d,e,f){return a.call(b,c,d,e,f)}}return function(){return a.apply(b,arguments)}},u=function(a,b,c){return null==a?s.identity:s.isFunction(a)?t(a,b,c):s.isObject(a)?s.matcher(a):s.property(a)};s.iteratee=function(a,b){return u(a,b,1/0)};var v=function(a,b){return function(c){var d=arguments.length;if(2>d||null==c)return c;for(var e=1;d>e;e++)for(var f=arguments[e],g=a(f),h=g.length,i=0;h>i;i++){var j=g[i];b&&c[j]!==void 0||(c[j]=f[j])}return c}},w=function(a){if(!s.isObject(a))return{};if(q)return q(a);r.prototype=a;var b=new r;return r.prototype=null,b},x=function(a){return function(b){return null==b?void 0:b[a]}},y=Math.pow(2,53)-1,z=x("length"),A=function(a){var b=z(a);return"number"==typeof b&&b>=0&&y>=b};s.each=s.forEach=function(a,b,c){b=t(b,c);var d,e;if(A(a))for(d=0,e=a.length;e>d;d++)b(a[d],d,a);else{var f=s.keys(a);for(d=0,e=f.length;e>d;d++)b(a[f[d]],f[d],a)}return a},s.map=s.collect=function(a,b,c){b=u(b,c);for(var d=!A(a)&&s.keys(a),e=(d||a).length,f=Array(e),g=0;e>g;g++){var h=d?d[g]:g;f[g]=b(a[h],h,a)}return f},s.reduce=s.foldl=s.inject=a(1),s.reduceRight=s.foldr=a(-1),s.find=s.detect=function(a,b,c){var d;return d=A(a)?s.findIndex(a,b,c):s.findKey(a,b,c),d!==void 0&&d!==-1?a[d]:void 0},s.filter=s.select=function(a,b,c){var d=[];return b=u(b,c),s.each(a,function(a,c,e){b(a,c,e)&&d.push(a)}),d},s.reject=function(a,b,c){return s.filter(a,s.negate(u(b)),c)},s.every=s.all=function(a,b,c){b=u(b,c);for(var d=!A(a)&&s.keys(a),e=(d||a).length,f=0;e>f;f++){var g=d?d[f]:f;if(!b(a[g],g,a))return!1}return!0},s.some=s.any=function(a,b,c){b=u(b,c);for(var d=!A(a)&&s.keys(a),e=(d||a).length,f=0;e>f;f++){var g=d?d[f]:f;if(b(a[g],g,a))return!0}return!1},s.contains=s.includes=s.include=function(a,b,c,d){return A(a)||(a=s.values(a)),("number"!=typeof c||d)&&(c=0),s.indexOf(a,b,c)>=0},s.invoke=function(a,b){var c=k.call(arguments,2),d=s.isFunction(b);return s.map(a,function(a){var e=d?b:a[b];return null==e?e:e.apply(a,c)})},s.pluck=function(a,b){return s.map(a,s.property(b))},s.where=function(a,b){return s.filter(a,s.matcher(b))},s.findWhere=function(a,b){return s.find(a,s.matcher(b))},s.max=function(a,b,c){var d,e,f=-1/0,g=-1/0;if(null==b&&null!=a){a=A(a)?a:s.values(a);for(var h=0,i=a.length;i>h;h++)d=a[h],d>f&&(f=d)}else b=u(b,c),s.each(a,function(a,c,d){e=b(a,c,d),(e>g||e===-1/0&&f===-1/0)&&(f=a,g=e)});return f},s.min=function(a,b,c){var d,e,f=1/0,g=1/0;if(null==b&&null!=a){a=A(a)?a:s.values(a);for(var h=0,i=a.length;i>h;h++)d=a[h],f>d&&(f=d)}else b=u(b,c),s.each(a,function(a,c,d){e=b(a,c,d),(g>e||1/0===e&&1/0===f)&&(f=a,g=e)});return f},s.shuffle=function(a){for(var b,c=A(a)?a:s.values(a),d=c.length,e=Array(d),f=0;d>f;f++)b=s.random(0,f),b!==f&&(e[f]=e[b]),e[b]=c[f];return e},s.sample=function(a,b,c){return null==b||c?(A(a)||(a=s.values(a)),a[s.random(a.length-1)]):s.shuffle(a).slice(0,Math.max(0,b))},s.sortBy=function(a,b,c){return b=u(b,c),s.pluck(s.map(a,function(a,c,d){return{value:a,index:c,criteria:b(a,c,d)}}).sort(function(a,b){var c=a.criteria,d=b.criteria;if(c!==d){if(c>d||c===void 0)return 1;if(d>c||d===void 0)return-1}return a.index-b.index}),"value")};var B=function(a){return function(b,c,d){var e={};return c=u(c,d),s.each(b,function(d,f){var g=c(d,f,b);a(e,d,g)}),e}};s.groupBy=B(function(a,b,c){s.has(a,c)?a[c].push(b):a[c]=[b]}),s.indexBy=B(function(a,b,c){a[c]=b}),s.countBy=B(function(a,b,c){s.has(a,c)?a[c]++:a[c]=1}),s.toArray=function(a){return a?s.isArray(a)?k.call(a):A(a)?s.map(a,s.identity):s.values(a):[]},s.size=function(a){return null==a?0:A(a)?a.length:s.keys(a).length},s.partition=function(a,b,c){b=u(b,c);var d=[],e=[];return s.each(a,function(a,c,f){(b(a,c,f)?d:e).push(a)}),[d,e]},s.first=s.head=s.take=function(a,b,c){return null==a?void 0:null==b||c?a[0]:s.initial(a,a.length-b)},s.initial=function(a,b,c){return k.call(a,0,Math.max(0,a.length-(null==b||c?1:b)))},s.last=function(a,b,c){return null==a?void 0:null==b||c?a[a.length-1]:s.rest(a,Math.max(0,a.length-b))},s.rest=s.tail=s.drop=function(a,b,c){return k.call(a,null==b||c?1:b)},s.compact=function(a){return s.filter(a,s.identity)};var C=function(a,b,c,d){for(var e=[],f=0,g=d||0,h=z(a);h>g;g++){var i=a[g];if(A(i)&&(s.isArray(i)||s.isArguments(i))){b||(i=C(i,b,c));var j=0,k=i.length;for(e.length+=k;k>j;)e[f++]=i[j++]}else c||(e[f++]=i)}return e};s.flatten=function(a,b){return C(a,b,!1)},s.without=function(a){return s.difference(a,k.call(arguments,1))},s.uniq=s.unique=function(a,b,c,d){s.isBoolean(b)||(d=c,c=b,b=!1),null!=c&&(c=u(c,d));for(var e=[],f=[],g=0,h=z(a);h>g;g++){var i=a[g],j=c?c(i,g,a):i;b?(g&&f===j||e.push(i),f=j):c?s.contains(f,j)||(f.push(j),e.push(i)):s.contains(e,i)||e.push(i)}return e},s.union=function(){return s.uniq(C(arguments,!0,!0))},s.intersection=function(a){for(var b=[],c=arguments.length,d=0,e=z(a);e>d;d++){var f=a[d];if(!s.contains(b,f)){for(var g=1;c>g&&s.contains(arguments[g],f);g++);g===c&&b.push(f)}}return b},s.difference=function(a){var b=C(arguments,!0,!0,1);return s.filter(a,function(a){return!s.contains(b,a)})},s.zip=function(){return s.unzip(arguments)},s.unzip=function(a){for(var b=a&&s.max(a,z).length||0,c=Array(b),d=0;b>d;d++)c[d]=s.pluck(a,d);return c},s.object=function(a,b){for(var c={},d=0,e=z(a);e>d;d++)b?c[a[d]]=b[d]:c[a[d][0]]=a[d][1];return c},s.findIndex=b(1),s.findLastIndex=b(-1),s.sortedIndex=function(a,b,c,d){c=u(c,d,1);for(var e=c(b),f=0,g=z(a);g>f;){var h=Math.floor((f+g)/2);c(a[h])<e?f=h+1:g=h}return f},s.indexOf=c(1,s.findIndex,s.sortedIndex),s.lastIndexOf=c(-1,s.findLastIndex),s.range=function(a,b,c){null==b&&(b=a||0,a=0),c=c||1;for(var d=Math.max(Math.ceil((b-a)/c),0),e=Array(d),f=0;d>f;f++,a+=c)e[f]=a;return e};var D=function(a,b,c,d,e){if(d instanceof b){var f=w(a.prototype),g=a.apply(f,e);return s.isObject(g)?g:f}return a.apply(c,e)};s.bind=function(a,b){if(p&&a.bind===p)return p.apply(a,k.call(arguments,1));if(!s.isFunction(a))throw new TypeError("Bind must be called on a function");var c=k.call(arguments,2),d=function(){return D(a,d,b,this,c.concat(k.call(arguments)))};return d},s.partial=function(a){var b=k.call(arguments,1),c=function(){for(var d=0,e=b.length,f=Array(e),g=0;e>g;g++)f[g]=b[g]===s?arguments[d++]:b[g];for(;d<arguments.length;)f.push(arguments[d++]);return D(a,c,this,this,f)};return c},s.bindAll=function(a){var b,c,d=arguments.length;if(1>=d)throw new Error("bindAll must be passed function names");for(b=1;d>b;b++)c=arguments[b],a[c]=s.bind(a[c],a);return a},s.memoize=function(a,b){var c=function(d){var e=c.cache,f=""+(b?b.apply(this,arguments):d);return s.has(e,f)||(e[f]=a.apply(this,arguments)),e[f]};return c.cache={},c},s.delay=function(a,b){var c=k.call(arguments,2);return setTimeout(function(){return a.apply(null,c)},b)},s.defer=s.partial(s.delay,s,1),s.throttle=function(a,b,c){var d,e,f,g=null,h=0;c||(c={});var i=function(){h=c.leading===!1?0:s.now(),g=null,f=a.apply(d,e),g||(d=e=null)};return function(){var j=s.now();h||c.leading!==!1||(h=j);var k=b-(j-h);return d=this,e=arguments,0>=k||k>b?(g&&(clearTimeout(g),g=null),h=j,f=a.apply(d,e),g||(d=e=null)):g||c.trailing===!1||(g=setTimeout(i,k)),f}},s.debounce=function(a,b,c){var d,e,f,g,h,i=function(){var j=s.now()-g;b>j&&j>=0?d=setTimeout(i,b-j):(d=null,c||(h=a.apply(f,e),d||(f=e=null)))};return function(){f=this,e=arguments,g=s.now();var j=c&&!d;return d||(d=setTimeout(i,b)),j&&(h=a.apply(f,e),f=e=null),h}},s.wrap=function(a,b){return s.partial(b,a)},s.negate=function(a){return function(){return!a.apply(this,arguments)}},s.compose=function(){var a=arguments,b=a.length-1;return function(){for(var c=b,d=a[b].apply(this,arguments);c--;)d=a[c].call(this,d);return d}},s.after=function(a,b){return function(){return--a<1?b.apply(this,arguments):void 0}},s.before=function(a,b){var c;return function(){return--a>0&&(c=b.apply(this,arguments)),1>=a&&(b=null),c}},s.once=s.partial(s.before,2);var E=!{toString:null}.propertyIsEnumerable("toString"),F=["valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"];s.keys=function(a){if(!s.isObject(a))return[];if(o)return o(a);var b=[];for(var c in a)s.has(a,c)&&b.push(c);return E&&d(a,b),b},s.allKeys=function(a){if(!s.isObject(a))return[];var b=[];for(var c in a)b.push(c);return E&&d(a,b),b},s.values=function(a){for(var b=s.keys(a),c=b.length,d=Array(c),e=0;c>e;e++)d[e]=a[b[e]];return d},s.mapObject=function(a,b,c){b=u(b,c);for(var d,e=s.keys(a),f=e.length,g={},h=0;f>h;h++)d=e[h],g[d]=b(a[d],d,a);return g},s.pairs=function(a){for(var b=s.keys(a),c=b.length,d=Array(c),e=0;c>e;e++)d[e]=[b[e],a[b[e]]];return d},s.invert=function(a){for(var b={},c=s.keys(a),d=0,e=c.length;e>d;d++)b[a[c[d]]]=c[d];return b},s.functions=s.methods=function(a){var b=[];for(var c in a)s.isFunction(a[c])&&b.push(c);return b.sort()},s.extend=v(s.allKeys),s.extendOwn=s.assign=v(s.keys),s.findKey=function(a,b,c){b=u(b,c);for(var d,e=s.keys(a),f=0,g=e.length;g>f;f++)if(d=e[f],b(a[d],d,a))return d},s.pick=function(a,b,c){var d,e,f={},g=a;if(null==g)return f;s.isFunction(b)?(e=s.allKeys(g),d=t(b,c)):(e=C(arguments,!1,!1,1),d=function(a,b,c){return b in c},g=Object(g));for(var h=0,i=e.length;i>h;h++){var j=e[h],k=g[j];d(k,j,g)&&(f[j]=k)}return f},s.omit=function(a,b,c){if(s.isFunction(b))b=s.negate(b);else{var d=s.map(C(arguments,!1,!1,1),String);b=function(a,b){return!s.contains(d,b)}}return s.pick(a,b,c)},s.defaults=v(s.allKeys,!0),s.create=function(a,b){var c=w(a);return b&&s.extendOwn(c,b),c},s.clone=function(a){return s.isObject(a)?s.isArray(a)?a.slice():s.extend({},a):a},s.tap=function(a,b){return b(a),a},s.isMatch=function(a,b){var c=s.keys(b),d=c.length;if(null==a)return!d;for(var e=Object(a),f=0;d>f;f++){var g=c[f];if(b[g]!==e[g]||!(g in e))return!1}return!0};var G=function(a,b,c,d){if(a===b)return 0!==a||1/a===1/b;if(null==a||null==b)return a===b;a instanceof s&&(a=a._wrapped),b instanceof s&&(b=b._wrapped);var e=l.call(a);if(e!==l.call(b))return!1;switch(e){case"[object RegExp]":case"[object String]":return""+a==""+b;case"[object Number]":return+a!==+a?+b!==+b:0===+a?1/+a===1/b:+a===+b;case"[object Date]":case"[object Boolean]":return+a===+b}var f="[object Array]"===e;if(!f){if("object"!=typeof a||"object"!=typeof b)return!1;var g=a.constructor,h=b.constructor;if(g!==h&&!(s.isFunction(g)&&g instanceof g&&s.isFunction(h)&&h instanceof h)&&"constructor"in a&&"constructor"in b)return!1}c=c||[],d=d||[];for(var i=c.length;i--;)if(c[i]===a)return d[i]===b;if(c.push(a),d.push(b),f){if(i=a.length,i!==b.length)return!1;for(;i--;)if(!G(a[i],b[i],c,d))return!1}else{var j,k=s.keys(a);if(i=k.length,s.keys(b).length!==i)return!1;for(;i--;)if(j=k[i],!s.has(b,j)||!G(a[j],b[j],c,d))return!1}return c.pop(),d.pop(),!0};s.isEqual=function(a,b){return G(a,b)},s.isEmpty=function(a){return null==a?!0:A(a)&&(s.isArray(a)||s.isString(a)||s.isArguments(a))?0===a.length:0===s.keys(a).length},s.isElement=function(a){return!!a&&1===a.nodeType},s.isArray=n||function(a){return"[object Array]"===l.call(a)},s.isObject=function(a){var b=typeof a;return"function"===b||"object"===b&&!!a},s.each(["Arguments","Function","String","Number","Date","RegExp","Error"],function(a){s["is"+a]=function(b){return l.call(b)==="[object "+a+"]"}}),s.isArguments(arguments)||(s.isArguments=function(a){return s.has(a,"callee")}),"function"!=typeof /./&&"object"!=typeof Int8Array&&(s.isFunction=function(a){return"function"==typeof a||!1}),s.isFinite=function(a){return isFinite(a)&&!isNaN(parseFloat(a))},s.isNaN=function(a){return s.isNumber(a)&&a!==+a},s.isBoolean=function(a){return a===!0||a===!1||"[object Boolean]"===l.call(a)},s.isNull=function(a){return null===a},s.isUndefined=function(a){return a===void 0},s.has=function(a,b){return null!=a&&m.call(a,b)},s.noConflict=function(){return e._=f,this},s.identity=function(a){return a},s.constant=function(a){return function(){return a}},s.noop=function(){},s.property=x,s.propertyOf=function(a){return null==a?function(){}:function(b){return a[b]}},s.matcher=s.matches=function(a){return a=s.extendOwn({},a),function(b){return s.isMatch(b,a)}},s.times=function(a,b,c){var d=Array(Math.max(0,a));b=t(b,c,1);for(var e=0;a>e;e++)d[e]=b(e);return d},s.random=function(a,b){return null==b&&(b=a,a=0),a+Math.floor(Math.random()*(b-a+1))},s.now=Date.now||function(){return(new Date).getTime()};var H={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},I=s.invert(H),J=function(a){var b=function(b){return a[b]},c="(?:"+s.keys(a).join("|")+")",d=RegExp(c),e=RegExp(c,"g");return function(a){return a=null==a?"":""+a,d.test(a)?a.replace(e,b):a}};s.escape=J(H),s.unescape=J(I),s.result=function(a,b,c){var d=null==a?void 0:a[b];return d===void 0&&(d=c),s.isFunction(d)?d.call(a):d};var K=0;s.uniqueId=function(a){var b=++K+"";return a?a+b:b},s.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var L=/(.)^/,M={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},N=/\\|'|\r|\n|\u2028|\u2029/g,O=function(a){return"\\"+M[a]};s.template=function(a,b,c){!b&&c&&(b=c),b=s.defaults({},b,s.templateSettings);var d=RegExp([(b.escape||L).source,(b.interpolate||L).source,(b.evaluate||L).source].join("|")+"|$","g"),e=0,f="__p+='";a.replace(d,function(b,c,d,g,h){return f+=a.slice(e,h).replace(N,O),e=h+b.length,c?f+="'+\n((__t=("+c+"))==null?'':_.escape(__t))+\n'":d?f+="'+\n((__t=("+d+"))==null?'':__t)+\n'":g&&(f+="';\n"+g+"\n__p+='"),b}),f+="';\n",b.variable||(f="with(obj||{}){\n"+f+"}\n"),f="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+f+"return __p;\n";try{var g=new Function(b.variable||"obj","_",f)}catch(h){throw h.source=f,h}var i=function(a){return g.call(this,a,s)},j=b.variable||"obj";return i.source="function("+j+"){\n"+f+"}",i},s.chain=function(a){var b=s(a);return b._chain=!0,b};var P=function(a,b){return a._chain?s(b).chain():b};s.mixin=function(a){s.each(s.functions(a),function(b){var c=s[b]=a[b];s.prototype[b]=function(){var a=[this._wrapped];return j.apply(a,arguments),P(this,c.apply(s,a))}})},s.mixin(s),s.each(["pop","push","reverse","shift","sort","splice","unshift"],function(a){var b=g[a];s.prototype[a]=function(){var c=this._wrapped;return b.apply(c,arguments),"shift"!==a&&"splice"!==a||0!==c.length||delete c[0],P(this,c)}}),s.each(["concat","join","slice"],function(a){var b=g[a];s.prototype[a]=function(){return P(this,b.apply(this._wrapped,arguments))}}),s.prototype.value=function(){return this._wrapped},s.prototype.valueOf=s.prototype.toJSON=s.prototype.value,s.prototype.toString=function(){return""+this._wrapped},"function"==typeof define&&define.amd&&define("underscore",[],function(){return s})}.call(this),function(a,b){if(typeof define=="function"&&define.amd)define("backbone",["underscore","jquery","exports"],function(c,d,f){a.Backbone=b(a,f,c,d)});else if(typeof exports!="undefined"){var c=require("underscore");b(a,exports,c)}else a.Backbone=b(a,{},a._,a.jQuery||a.Zepto||a.ender||a.$)}(this,function(a,b,c,d){var e=a.Backbone,f=[],g=f.push,h=f.slice,i=f.splice;b.VERSION="1.1.2",b.$=d,b.noConflict=function(){return a.Backbone=e,this},b.emulateHTTP=!1,b.emulateJSON=!1;var j=b.Events={on:function(a,b,c){if(!l(this,"on",a,[b,c])||!b)return this;this._events||(this._events={});var d=this._events[a]||(this._events[a]=[]);return d.push({callback:b,context:c,ctx:c||this}),this},once:function(a,b,d){if(!l(this,"once",a,[b,d])||!b)return this;var e=this,f=c.once(function(){e.off(a,f),b.apply(this,arguments)});return f._callback=b,this.on(a,f,d)},off:function(a,b,d){var e,f,g,h,i,j,k,m;if(!this._events||!l(this,"off",a,[b,d]))return this;if(!a&&!b&&!d)return this._events=void 0,this;h=a?[a]:c.keys(this._events);for(i=0,j=h.length;i<j;i++){a=h[i];if(g=this._events[a]){this._events[a]=e=[];if(b||d)for(k=0,m=g.length;k<m;k++)f=g[k],(b&&b!==f.callback&&b!==f.callback._callback||d&&d!==f.context)&&e.push(f);e.length||delete this._events[a]}}return this},trigger:function(a){if(!this._events)return this;var b=h.call(arguments,1);if(!l(this,"trigger",a,b))return this;var c=this._events[a],d=this._events.all;return c&&m(c,b),d&&m(d,arguments),this},stopListening:function(a,b,d){var e=this._listeningTo;if(!e)return this;var f=!b&&!d;!d&&typeof b=="object"&&(d=this),a&&((e={})[a._listenId]=a);for(var g in e)a=e[g],a.off(b,d,this),(f||c.isEmpty(a._events))&&delete this._listeningTo[g];return this}},k=/\s+/,l=function(a,b,c,d){if(!c)return!0;if(typeof c=="object"){for(var e in c)a[b].apply(a,[e,c[e]].concat(d));return!1}if(k.test(c)){var f=c.split(k);for(var g=0,h=f.length;g<h;g++)a[b].apply(a,[f[g]].concat(d));return!1}return!0},m=function(a,b){var c,d=-1,e=a.length,f=b[0],g=b[1],h=b[2];switch(b.length){case 0:while(++d<e)(c=a[d]).callback.call(c.ctx);return;case 1:while(++d<e)(c=a[d]).callback.call(c.ctx,f);return;case 2:while(++d<e)(c=a[d]).callback.call(c.ctx,f,g);return;case 3:while(++d<e)(c=a[d]).callback.call(c.ctx,f,g,h);return;default:while(++d<e)(c=a[d]).callback.apply(c.ctx,b);return}},n={listenTo:"on",listenToOnce:"once"};c.each(n,function(a,b){j[b]=function(b,d,e){var f=this._listeningTo||(this._listeningTo={}),g=b._listenId||(b._listenId=c.uniqueId("l"));return f[g]=b,!e&&typeof d=="object"&&(e=this),b[a](d,e,this),this}}),j.bind=j.on,j.unbind=j.off,c.extend(b,j);var o=b.Model=function(a,b){var d=a||{};b||(b={}),this.cid=c.uniqueId("c"),this.attributes={},b.collection&&(this.collection=b.collection),b.parse&&(d=this.parse(d,b)||{}),d=c.defaults({},d,c.result(this,"defaults")),this.set(d,b),this.changed={},this.initialize.apply(this,arguments)};c.extend(o.prototype,j,{changed:null,validationError:null,idAttribute:"id",initialize:function(){},toJSON:function(a){return c.clone(this.attributes)},sync:function(){return b.sync.apply(this,arguments)},get:function(a){return this.attributes[a]},escape:function(a){return c.escape(this.get(a))},has:function(a){return this.get(a)!=null},set:function(a,b,d){var e,f,g,h,i,j,k,l;if(a==null)return this;typeof a=="object"?(f=a,d=b):(f={})[a]=b,d||(d={});if(!this._validate(f,d))return!1;g=d.unset,i=d.silent,h=[],j=this._changing,this._changing=!0,j||(this._previousAttributes=c.clone(this.attributes),this.changed={}),l=this.attributes,k=this._previousAttributes,this.idAttribute in f&&(this.id=f[this.idAttribute]);for(e in f)b=f[e],c.isEqual(l[e],b)||h.push(e),c.isEqual(k[e],b)?delete this.changed[e]:this.changed[e]=b,g?delete l[e]:l[e]=b;if(!i){h.length&&(this._pending=d);for(var m=0,n=h.length;m<n;m++)this.trigger("change:"+h[m],this,l[h[m]],d)}if(j)return this;if(!i)while(this._pending)d=this._pending,this._pending=!1,this.trigger("change",this,d);return this._pending=!1,this._changing=!1,this},unset:function(a,b){return this.set(a,void 0,c.extend({},b,{unset:!0}))},clear:function(a){var b={};for(var d in this.attributes)b[d]=void 0;return this.set(b,c.extend({},a,{unset:!0}))},hasChanged:function(a){return a==null?!c.isEmpty(this.changed):c.has(this.changed,a)},changedAttributes:function(a){if(!a)return this.hasChanged()?c.clone(this.changed):!1;var b,d=!1,e=this._changing?this._previousAttributes:this.attributes;for(var f in a){if(c.isEqual(e[f],b=a[f]))continue;(d||(d={}))[f]=b}return d},previous:function(a){return a==null||!this._previousAttributes?null:this._previousAttributes[a]},previousAttributes:function(){return c.clone(this._previousAttributes)},fetch:function(a){a=a?c.clone(a):{},a.parse===void 0&&(a.parse=!0);var b=this,d=a.success;return a.success=function(c){if(!b.set(b.parse(c,a),a))return!1;d&&d(b,c,a),b.trigger("sync",b,c,a)},N(this,a),this.sync("read",this,a)},save:function(a,b,d){var e,f,g,h=this.attributes;a==null||typeof a=="object"?(e=a,d=b):(e={})[a]=b,d=c.extend({validate:!0},d);if(e&&!d.wait){if(!this.set(e,d))return!1}else if(!this._validate(e,d))return!1;e&&d.wait&&(this.attributes=c.extend({},h,e)),d.parse===void 0&&(d.parse=!0);var i=this,j=d.success;return d.success=function(a){i.attributes=h;var b=i.parse(a,d);d.wait&&(b=c.extend(e||{},b));if(c.isObject(b)&&!i.set(b,d))return!1;j&&j(i,a,d),i.trigger("sync",i,a,d)},N(this,d),f=this.isNew()?"create":d.patch?"patch":"update",f==="patch"&&(d.attrs=e),g=this.sync(f,this,d),e&&d.wait&&(this.attributes=h),g},destroy:function(a){a=a?c.clone(a):{};var b=this,d=a.success,e=function(){b.trigger("destroy",b,b.collection,a)};a.success=function(c){(a.wait||b.isNew())&&e(),d&&d(b,c,a),b.isNew()||b.trigger("sync",b,c,a)};if(this.isNew())return a.success(),!1;N(this,a);var f=this.sync("delete",this,a);return a.wait||e(),f},url:function(){var a=c.result(this,"urlRoot")||c.result(this.collection,"url")||M();return this.isNew()?a:a.replace(/([^\/])$/,"$1/")+encodeURIComponent(this.id)},parse:function(a,b){return a},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return!this.has(this.idAttribute)},isValid:function(a){return this._validate({},c.extend(a||{},{validate:!0}))},_validate:function(a,b){if(!b.validate||!this.validate)return!0;a=c.extend({},this.attributes,a);var d=this.validationError=this.validate(a,b)||null;return d?(this.trigger("invalid",this,d,c.extend(b,{validationError:d})),!1):!0}});var p=["keys","values","pairs","invert","pick","omit"];c.each(p,function(a){o.prototype[a]=function(){var b=h.call(arguments);return b.unshift(this.attributes),c[a].apply(c,b)}});var q=b.Collection=function(a,b){b||(b={}),b.model&&(this.model=b.model),b.comparator!==void 0&&(this.comparator=b.comparator),this._reset(),this.initialize.apply(this,arguments),a&&this.reset(a,c.extend({silent:!0},b))},r={add:!0,remove:!0,merge:!0},s={add:!0,remove:!1};c.extend(q.prototype,j,{model:o,initialize:function(){},toJSON:function(a){return this.map(function(b){return b.toJSON(a)})},sync:function(){return b.sync.apply(this,arguments)},add:function(a,b){return this.set(a,c.extend({merge:!1},b,s))},remove:function(a,b){var d=!c.isArray(a);a=d?[a]:c.clone(a),b||(b={});var e,f,g,h;for(e=0,f=a.length;e<f;e++){h=a[e]=this.get(a[e]);if(!h)continue;delete this._byId[h.id],delete this._byId[h.cid],g=this.indexOf(h),this.models.splice(g,1),this.length--,b.silent||(b.index=g,h.trigger("remove",h,this,b)),this._removeReference(h,b)}return d?a[0]:a},set:function(a,b){b=c.defaults({},b,r),b.parse&&(a=this.parse(a,b));var d=!c.isArray(a);a=d?a?[a]:[]:c.clone(a);var e,f,g,h,i,j,k,l=b.at,m=this.model,n=this.comparator&&l==null&&b.sort!==!1,p=c.isString(this.comparator)?this.comparator:null,q=[],s=[],t={},u=b.add,v=b.merge,w=b.remove,x=!n&&u&&w?[]:!1;for(e=0,f=a.length;e<f;e++){i=a[e]||{},i instanceof o?g=h=i:g=i[m.prototype.idAttribute||"id"];if(j=this.get(g))w&&(t[j.cid]=!0),v&&(i=i===h?h.attributes:i,b.parse&&(i=j.parse(i,b)),j.set(i,b),n&&!k&&j.hasChanged(p)&&(k=!0)),a[e]=j;else if(u){h=a[e]=this._prepareModel(i,b);if(!h)continue;q.push(h),this._addReference(h,b)}h=j||h,x&&(h.isNew()||!t[h.id])&&x.push(h),t[h.id]=!0}if(w){for(e=0,f=this.length;e<f;++e)t[(h=this.models[e]).cid]||s.push(h);s.length&&this.remove(s,b)}if(q.length||x&&x.length){n&&(k=!0),this.length+=q.length;if(l!=null)for(e=0,f=q.length;e<f;e++)this.models.splice(l+e,0,q[e]);else{x&&(this.models.length=0);var y=x||q;for(e=0,f=y.length;e<f;e++)this.models.push(y[e])}}k&&this.sort({silent:!0});if(!b.silent){for(e=0,f=q.length;e<f;e++)(h=q[e]).trigger("add",h,this,b);(k||x&&x.length)&&this.trigger("sort",this,b)}return d?a[0]:a},reset:function(a,b){b||(b={});for(var d=0,e=this.models.length;d<e;d++)this._removeReference(this.models[d],b);return b.previousModels=this.models,this._reset(),a=this.add(a,c.extend({silent:!0},b)),b.silent||this.trigger("reset",this,b),a},push:function(a,b){return this.add(a,c.extend({at:this.length},b))},pop:function(a){var b=this.at(this.length-1);return this.remove(b,a),b},unshift:function(a,b){return this.add(a,c.extend({at:0},b))},shift:function(a){var b=this.at(0);return this.remove(b,a),b},slice:function(){return h.apply(this.models,arguments)},get:function(a){return a==null?void 0:this._byId[a]||this._byId[a.id]||this._byId[a.cid]},at:function(a){return this.models[a]},where:function(a,b){return c.isEmpty(a)?b?void 0:[]:this[b?"find":"filter"](function(b){for(var c in a)if(a[c]!==b.get(c))return!1;return!0})},findWhere:function(a){return this.where(a,!0)},sort:function(a){if(!this.comparator)throw new Error("Cannot sort a set without a comparator");return a||(a={}),c.isString(this.comparator)||this.comparator.length===1?this.models=this.sortBy(this.comparator,this):this.models.sort(c.bind(this.comparator,this)),a.silent||this.trigger("sort",this,a),this},pluck:function(a){return c.invoke(this.models,"get",a)},fetch:function(a){a=a?c.clone(a):{},a.parse===void 0&&(a.parse=!0);var b=a.success,d=this;return a.success=function(c){var e=a.reset?"reset":"set";d[e](c,a),b&&b(d,c,a),d.trigger("sync",d,c,a)},N(this,a),this.sync("read",this,a)},create:function(a,b){b=b?c.clone(b):{};if(!(a=this._prepareModel(a,b)))return!1;b.wait||this.add(a,b);var d=this,e=b.success;return b.success=function(a,c){b.wait&&d.add(a,b),e&&e(a,c,b)},a.save(null,b),a},parse:function(a,b){return a},clone:function(){return new this.constructor(this.models)},_reset:function(){this.length=0,this.models=[],this._byId={}},_prepareModel:function(a,b){if(a instanceof o)return a;b=b?c.clone(b):{},b.collection=this;var d=new this.model(a,b);return d.validationError?(this.trigger("invalid",this,d.validationError,b),!1):d},_addReference:function(a,b){this._byId[a.cid]=a,a.id!=null&&(this._byId[a.id]=a),a.collection||(a.collection=this),a.on("all",this._onModelEvent,this)},_removeReference:function(a,b){this===a.collection&&delete a.collection,a.off("all",this._onModelEvent,this)},_onModelEvent:function(a,b,c,d){if((a==="add"||a==="remove")&&c!==this)return;a==="destroy"&&this.remove(b,d),b&&a==="change:"+b.idAttribute&&(delete this._byId[b.previous(b.idAttribute)],b.id!=null&&(this._byId[b.id]=b)),this.trigger.apply(this,arguments)}});var t=["forEach","each","map","collect","reduce","foldl","inject","reduceRight","foldr","find","detect","filter","select","reject","every","all","some","any","include","contains","invoke","max","min","toArray","size","first","head","take","initial","rest","tail","drop","last","without","difference","indexOf","shuffle","lastIndexOf","isEmpty","chain","sample"];c.each(t,function(a){q.prototype[a]=function(){var b=h.call(arguments);return b.unshift(this.models),c[a].apply(c,b)}});var u=["groupBy","countBy","sortBy","indexBy"];c.each(u,function(a){q.prototype[a]=function(b,d){var e=c.isFunction(b)?b:function(a){return a.get(b)};return c[a](this.models,e,d)}});var v=b.View=function(a){this.cid=c.uniqueId("view"),a||(a={}),c.extend(this,c.pick(a,x)),this._ensureElement(),this.initialize.apply(this,arguments),this.delegateEvents()},w=/^(\S+)\s*(.*)$/,x=["model","collection","el","id","attributes","className","tagName","events"];c.extend(v.prototype,j,{tagName:"div",$:function(a){return this.$el.find(a)},initialize:function(){},render:function(){return this},remove:function(){return this.$el.remove(),this.stopListening(),this},setElement:function(a,c){return this.$el&&this.undelegateEvents(),this.$el=a instanceof b.$?a:b.$(a),this.el=this.$el[0],c!==!1&&this.delegateEvents(),this},delegateEvents:function(a){if(!a&&!(a=c.result(this,"events")))return this;this.undelegateEvents();for(var b in a){var d=a[b];c.isFunction(d)||(d=this[a[b]]);if(!d)continue;var e=b.match(w),f=e[1],g=e[2];d=c.bind(d,this),f+=".delegateEvents"+this.cid,g===""?this.$el.on(f,d):this.$el.on(f,g,d)}return this},undelegateEvents:function(){return this.$el.off(".delegateEvents"+this.cid),this},_ensureElement:function(){if(!this.el){var a=c.extend({},c.result(this,"attributes"));this.id&&(a.id=c.result(this,"id")),this.className&&(a["class"]=c.result(this,"className"));var d=b.$("<"+c.result(this,"tagName")+">").attr(a);this.setElement(d,!1)}else this.setElement(c.result(this,"el"),!1)}}),b.sync=function(a,d,e){var f=z[a];c.defaults(e||(e={}),{emulateHTTP:b.emulateHTTP,emulateJSON:b.emulateJSON});var g={type:f,dataType:"json"};e.url||(g.url=c.result(d,"url")||M()),e.data==null&&d&&(a==="create"||a==="update"||a==="patch")&&(g.contentType="application/json",g.data=JSON.stringify(e.attrs||d.toJSON(e))),e.emulateJSON&&(g.contentType="application/x-www-form-urlencoded",g.data=g.data?{model:g.data}:{});if(e.emulateHTTP&&(f==="PUT"||f==="DELETE"||f==="PATCH")){g.type="POST",e.emulateJSON&&(g.data._method=f);var h=e.beforeSend;e.beforeSend=function(a){a.setRequestHeader("X-HTTP-Method-Override",f);if(h)return h.apply(this,arguments)}}g.type!=="GET"&&!e.emulateJSON&&(g.processData=!1),g.type==="PATCH"&&y&&(g.xhr=function(){return new ActiveXObject("Microsoft.XMLHTTP")});var i=e.xhr=b.ajax(c.extend(g,e));return d.trigger("request",d,i,e),i};var y=typeof window!="undefined"&&!!window.ActiveXObject&&(!window.XMLHttpRequest||!(new XMLHttpRequest).dispatchEvent),z={create:"POST",update:"PUT",patch:"PATCH","delete":"DELETE",read:"GET"};b.ajax=function(){return b.$.ajax.apply(b.$,arguments)};var A=b.Router=function(a){a||(a={}),a.routes&&(this.routes=a.routes),this._bindRoutes(),this.initialize.apply(this,arguments)},B=/\((.*?)\)/g,C=/(\(\?)?:\w+/g,D=/\*\w+/g,E=/[\-{}\[\]+?.,\\\^$|#\s]/g;c.extend(A.prototype,j,{initialize:function(){},route:function(a,d,e){c.isRegExp(a)||(a=this._routeToRegExp(a)),c.isFunction(d)&&(e=d,d=""),e||(e=this[d]);var f=this;return b.history.route(a,function(c){var g=f._extractParameters(a,c);f.execute(e,g),f.trigger.apply(f,["route:"+d].concat(g)),f.trigger("route",d,g),b.history.trigger("route",f,d,g)}),this},execute:function(a,b){a&&a.apply(this,b)},navigate:function(a,c){return b.history.navigate(a,c),this},_bindRoutes:function(){if(!this.routes)return;this.routes=c.result(this,"routes");var a,b=c.keys(this.routes);while((a=b.pop())!=null)this.route(a,this.routes[a])},_routeToRegExp:function(a){return a=a.replace(E,"\\$&").replace(B,"(?:$1)?").replace(C,function(a,b){return b?a:"([^/?]+)"}).replace(D,"([^?]*?)"),new RegExp("^"+a+"(?:\\?([\\s\\S]*))?$")},_extractParameters:function(a,b){var d=a.exec(b).slice(1);return c.map(d,function(a,b){return b===d.length-1?a||null:a?decodeURIComponent(a):null})}});var F=b.History=function(){this.handlers=[],c.bindAll(this,"checkUrl"),typeof window!="undefined"&&(this.location=window.location,this.history=window.history)},G=/^[#\/]|\s+$/g,H=/^\/+|\/+$/g,I=/msie [\w.]+/,J=/\/$/,K=/#.*$/;F.started=!1,c.extend(F.prototype,j,{interval:50,atRoot:function(){return this.location.pathname.replace(/[^\/]$/,"$&/")===this.root},getHash:function(a){var b=(a||this).location.href.match(/#(.*)$/);return b?b[1]:""},getFragment:function(a,b){if(a==null)if(this._hasPushState||!this._wantsHashChange||b){a=decodeURI(this.location.pathname+this.location.search);var c=this.root.replace(J,"");a.indexOf(c)||(a=a.slice(c.length))}else a=this.getHash();return a.replace(G,"")},start:function(a){if(F.started)throw new Error("Backbone.history has already been started");F.started=!0,this.options=c.extend({root:"/"},this.options,a),this.root=this.options.root,this._wantsHashChange=this.options.hashChange!==!1,this._wantsPushState=!!this.options.pushState,this._hasPushState=!!(this.options.pushState&&this.history&&this.history.pushState);var d=this.getFragment(),e=document.documentMode,f=I.exec(navigator.userAgent.toLowerCase())&&(!e||e<=7);this.root=("/"+this.root+"/").replace(H,"/");if(f&&this._wantsHashChange){var g=b.$('<iframe src="javascript:0" tabindex="-1">');this.iframe=g.hide().appendTo("body")[0].contentWindow,this.navigate(d)}this._hasPushState?b.$(window).on("popstate",this.checkUrl):this._wantsHashChange&&"onhashchange"in window&&!f?b.$(window).on("hashchange",this.checkUrl):this._wantsHashChange&&(this._checkUrlInterval=setInterval(this.checkUrl,this.interval)),this.fragment=d;var h=this.location;if(this._wantsHashChange&&this._wantsPushState){if(!this._hasPushState&&!this.atRoot())return this.fragment=this.getFragment(null,!0),this.location.replace(this.root+"#"+this.fragment),!0;this._hasPushState&&this.atRoot()&&h.hash&&(this.fragment=this.getHash().replace(G,""),this.history.replaceState({},document.title,this.root+this.fragment))}if(!this.options.silent)return this.loadUrl()},stop:function(){b.$(window).off("popstate",this.checkUrl).off("hashchange",this.checkUrl),this._checkUrlInterval&&clearInterval(this._checkUrlInterval),F.started=!1},route:function(a,b){this.handlers.unshift({route:a,callback:b})},checkUrl:function(a){var b=this.getFragment();b===this.fragment&&this.iframe&&(b=this.getFragment(this.getHash(this.iframe)));if(b===this.fragment)return!1;this.iframe&&this.navigate(b),this.loadUrl()},loadUrl:function(a){return a=this.fragment=this.getFragment(a),c.any(this.handlers,function(b){if(b.route.test(a))return b.callback(a),!0})},navigate:function(a,b){if(!F.started)return!1;if(!b||b===!0)b={trigger:!!b};var c=this.root+(a=this.getFragment(a||""));a=a.replace(K,"");if(this.fragment===a)return;this.fragment=a,a===""&&c!=="/"&&(c=c.slice(0,-1));if(this._hasPushState)this.history[b.replace?"replaceState":"pushState"]({},document.title,c);else{if(!this._wantsHashChange)return this.location.assign(c);this._updateHash(this.location,a,b.replace),this.iframe&&a!==this.getFragment(this.getHash(this.iframe))&&(b.replace||this.iframe.document.open().close(),this._updateHash(this.iframe.location,a,b.replace))}if(b.trigger)return this.loadUrl(a)},_updateHash:function(a,b,c){if(c){var d=a.href.replace(/(javascript:|#).*$/,"");a.replace(d+"#"+b)}else a.hash="#"+b}}),b.history=new F;var L=function(a,b){var d=this,e;a&&c.has(a,"constructor")?e=a.constructor:e=function(){return d.apply(this,arguments)},c.extend(e,d,b);var f=function(){this.constructor=e};return f.prototype=d.prototype,e.prototype=new f,a&&c.extend(e.prototype,a),e.__super__=d.prototype,e};o.extend=q.extend=A.extend=v.extend=F.extend=L;var M=function(){throw new Error('A "url" property or function must be specified')},N=function(a,b){var c=b.error;b.error=function(d){c&&c(a,d,b),a.trigger("error",a,d,b)}};return b}),function(a,b){a.fn.placeholder=function(c){var d={labelMode:!1,labelStyle:{},labelAlpha:!1,labelAcross:!1},e=a.extend({},d,c||{}),f=function(a,b){a.val()===""?b.css("opacity",.4).html(a.data("placeholder")):b.html("")},g=function(c){if(document.querySelector)return a(c).attr("placeholder");var d;return d=c.getAttributeNode("placeholder"),d&&d.nodeValue!==""?d.nodeValue:b};return a(this).each(function(){var b=a(this),c="placeholder"in document.createElement("input"),d=g(this);if(!d||!e.labelMode&&c||e.labelMode&&!e.labelAcross&&c)return;b.data("placeholder",d);if(e.labelMode){var h=b.attr("id"),i=null;h||(h="placeholder"+Math.random(),b.attr("id",h)),i=a('<label for="'+h+'"></label>').css(a.extend({lineHeight:"1.3",position:"absolute",color:"graytext",cursor:"text",marginLeft:b.css("marginLeft"),marginTop:b.css("marginTop"),paddingLeft:b.css("paddingLeft"),paddingTop:b.css("paddingTop")},e.labelStyle)).insertBefore(b),e.labelAlpha?(b.bind({focus:function(){f(a(this),i)},input:function(){f(a(this),i)},blur:function(){this.value===""&&i.css("opacity",1).html(d)}}),window.screenX||(b.get(0).onpropertychange=function(a){a=a||window.event,a.propertyName=="value"&&f(b,i)}),i.get(0).oncontextmenu=function(){return b.trigger("focus"),!1}):b.bind({focus:function(){i.html("")},blur:function(){a(this).val()===""&&i.html(d)}}),e.labelAcross&&b.removeAttr("placeholder"),b.val()===""&&i.html(d)}else b.bind({focus:function(){a(this).val()===d&&a(this).val(""),a(this).css("color","")},blur:function(){a(this).val()===""&&a(this).val(d).css("color","graytext")}}),b.val()===""&&b.val(d).css("color","graytext")}),a(this)}}(jQuery),define("placeholder",function(){}),!function(a){var b={delay:function(a,b){return b=b===undefined||b<0?1e3:b,setTimeout(function(){a()},b)},url:{redirect:function(a,b){b?location.href=a+(a.indexOf("?")==-1?"?":"&")+$.param(b):location.href=a},delayRedirect:function(a,c,d){return b.delay(function(){b.url.redirect(a,d)},c)}},layer:{alert:function(a,b){return layer.alert(a,-1,b)},fail:function(a,b){return layer.msg(a==undefined?"??????????????????????????????...":a,b>0?b:2,{type:8,shade:!1})},ok:function(a,b){return layer.msg(a==undefined?"????????????":a,b>0?b:2,{type:1,shade:!1})},mess:function(a,c){return b.layer.info(a,c)},info:function(a,b){return layer.msg(a,b>0?b:2,{type:-1,shade:!1})},load:function(a){return layer.load(a==undefined?"????????????????????????":a,0)},close:function(a){a>0?layer.close(a):layer.closeAll()},ajaxClose:function(a){setTimeout(function(){b.layer.close(a)},600)},ajaxInfo:function(a,c,d){setTimeout(function(){b.layer.close(d),b.layer.info(a,c)},600)}},storage:{support:function(){return"localStorage"in a&&a.localStorage!==null},get:function(a){if(!b.storage.support())return"";try{return localStorage.getItem(a)}catch(c){return b.layer.info("?????????????????????/?????????????????????????????????????????????????????????????????????"),""}},set:function(a,c){if(!b.storage.support())return!1;try{return localStorage.setItem(a,c),!0}catch(d){return b.layer.info("?????????????????????/?????????????????????????????????????????????????????????????????????"),!1}},remove:function(a){try{return localStorage.removeItem(a),!0}catch(c){return b.layer.info("?????????????????????/?????????????????????????????????????????????????????????????????????"),!1}}},regExp:{mobile:/^1[3-9]\d{9}$/,email:/^[\w\+\-]+(\.[\w\+\-]+)*@[a-z\d\-]+(\.[a-z\d\-]+)*\.([a-z]{2,4})$/i,numlen6:/^\d{6}$/,password:/^[\x21-\x7E]{6,50}$/,name:/^[\u4e00-\u9fa50-9a-zA-Z \.]{1,20}$/,postcode:/^\d{6}$/,address:/^[\u4E00-\u9FA50-9a-zA-Z_()??????#-]{1,78}$/,remark:/^[\u4E00-\u9FA5 \x21-\x7E]{1,200}$/,remark2:/.{1,200}/,company:/^[\u4E00-\u9FA50-9a-zA-Z_()??????#-]{1,50}$/,couponcode:/^[0-9a-zA-Z]{6,12}$/},login:{override:function(){},callback:function(a){var b=$(".udz-popup-login"),c='<img src="'+(a.photo?a.photo:sStaticUrl+"statics/udz/images/thumb.png")+'"> '+(a.nickname?a.nickname:a.username);b.parent().html(c),$("#newhead").find(".queryorder,.seller").addClass("login")},popup:function(){var c=$.layer({type:2,title:"????????????",fadeIn:400,shadeClose:!1,maxmin:!1,fix:!0,area:["480px","520px"],iframe:{src:GlobalConfigUrl.indexUrl+"/_loginpopup"}});return a.fnLoginPopupProcess=function(a){typeof b.login.callback=="function"&&b.login.callback(a),typeof b.login.override=="function"&&b.login.override(a),setTimeout(function(){layer.close(c)},1e3)},!1}},tongji:{process:function(a,b){var c=GlobalConfigUrl.aicurl+a,d=[];for(var e in b)d.push(e+"="+b[e]);c+=d.join("&");var f=$("#img-udz-statistics");f.length>0?f.attr("src",c):(f=$("<img src="+c+' id="img-udz-statistics" />'),$(document.body).append(f))},tongjiOptions:{rf:encodeURIComponent(document.referrer),siteid:1},tongjiProcess:function(a){if(GlobalConfigUrl.productionEnv=="0")return!1;a=$.extend(a,b.tongji.tongjiOptions),b.tongji.process("/collect?",a)},eventOptions:{rf:encodeURIComponent(document.referrer),siteid:1},eventProcess:function(a){if(GlobalConfigUrl.productionEnv=="0")return!1;a=$.extend(a,b.tongji.eventOptions),b.tongji.process("/events?",a)}},date:{format:function(a,b){typeof b=="undefined"&&(b=a,a=new Date);var c={"M+":a.getMonth()+1,"d+":a.getDate(),"h+":a.getHours(),"m+":a.getMinutes(),"s+":a.getSeconds(),"q+":Math.floor((a.getMonth()+3)/3),S:a.getMilliseconds()};/(y+)/.test(b)&&(b=b.replace(RegExp.$1,(a.getFullYear()+"").substr(4-RegExp.$1.length)));for(var d in c)(new RegExp("("+d+")")).test(b)&&(b=b.replace(RegExp.$1,RegExp.$1.length==1?c[d]:("00"+c[d]).substr((""+c[d]).length)));return b}},cookie:{get:function(a){var b=a+"=",c=b.length,d=document.cookie.length,e=0;while(e<d){var f=e+c;if(document.cookie.substring(e,f)==b){var g=document.cookie.indexOf(";",f);return g==-1&&(g=document.cookie.length),decodeURIComponent(document.cookie.substring(f,g))}e=document.cookie.indexOf(" ",e)+1;if(e==0)break}return""},set:function(a,b,c,d,e,f){document.cookie=a+"="+encodeURIComponent(b)+(c?"; expires="+c:"")+(d?"; path="+d:"")+(e?"; domain="+e:"")+(f?"; secure":"")},del:function(a,b,c){this.get(a)&&(document.cookie=a+"="+(b?"; path="+b:"")+(c?"; domain="+c:"")+"; expires=Thu, 01-Jan-70 00:00:01 GMT")}},header:function(){},footer:function(){},shareInit:function(a,b,c,d,e,f){function j(){i=a.join("||")}function k(){var a=(GlobalConfigUrl.devicetype==undefined||GlobalConfigUrl.devicetype=="pc"?"http://v.t.sina.com.cn/share/share.php?":"http://service.weibo.com/share/mobile.php?")+"appkey="+g+"&title="+encodeURIComponent(f)+"&url="+encodeURIComponent(c)+"&pic="+encodeURIComponent(i)+"&summary="+encodeURIComponent(f);$("#shareSinaWeibo").attr("href",a).attr("target","_blank")}function l(){var a="http://sns.qzone.qq.com/cgi-bin/qzshare/cgi_qzshare_onekey?desc="+encodeURIComponent(d)+"&url="+encodeURIComponent(c)+"&pics="+encodeURIComponent(i)+"&summary="+encodeURIComponent(d);$("#shareQzone").attr("href",a).attr("target","_blank")}function m(){var b="http://widget.renren.com/dialog/share?title="+encodeURIComponent(e)+"&resourceUrl="+encodeURIComponent(c)+"&srcUrl="+encodeURIComponent(c)+"&thumbnail_url="+encodeURIComponent(a[0])+"&summary="+encodeURIComponent(e);$("#shareRenren").attr("href",b).attr("target","_blank")}function n(){var a=$("#qrcode"),c="",d={};a.length>0&&!a.attr("data-src")&&b>0&&(c="_campaignQrcode",d={id:b}),q(c,d,a)}function o(){var a=$("#shopqrcode"),c="",d={};a.length>0&&!a.attr("data-src")&&b>0&&(c="_storeQrcode",d={storeid:b}),q(c,d,a)}function p(){var a=$("#recommendqrcode"),b="",c={};a.length>0&&!a.attr("data-src")&&(b="_recommendQrcode"),q(b,c,a)}function q(a,b,c){a&&$.ajax({url:a,type:"get",dataType:"json",data:b}).done(function(a){a.code==200&&c.attr("data-src",a.data.url)}).fail(function(a){}).always(function(){});var d;c.parent().on("mouseenter",function(){c.attr("data-src")&&(c.attr("src",c.attr("data-src")),c.removeAttr("data-src")),d=setTimeout(function(){c.show()},300)}).on("mouseleave",function(){clearTimeout(d),c.hide()})}function r(){$("#shareSinaWeiboForm").submit()}function s(){if(window.location.hostname=="localhost")return;$("#shareQzoneForm").submit()}function t(){$("#shareRenrenForm").submit()}var g=1660997320,h=window.location.href,i="";j(),k(),l(),m(),n(),o(),p()},lazyLoadImg:function(){$.fn.scrollLoading=function(a){var b={attr:"data-loadsrc"},c=$.extend({},b,a||{});c.cache=[],$(this).each(function(){var a=$(this),b=this.nodeName.toLowerCase(),d=a.attr(c.attr);a.removeAttr(c.attr);if(!d)return;var e={obj:a,tag:b,url:d};c.cache.push(e)});var d=function(a){var b=$(window).scrollTop(),d=b+$(window).height();return $.each(c.cache,function(a,c){var e=c.obj,f=c.tag,g=c.url;if(e){post=e.offset().top,posb=post+e.height();if(post>b&&post<d||posb>b&&posb<d)e.attr("src",g),c.obj=null}}),!1};d(1),$(window).on("scroll",d)}},udzInit:function(){"placeholder"in document.createElement("input")==0&&typeof require!="undefined"&&require(["placeholder"],function(){$("[placeholder]").each(function(){var a=$(this);a.placeholder({labelMode:!0,labelStyle:a.data("phstyle"),labelAlpha:!0})})});var a=0;$("#newhead").on("click",".udz-popup-login",function(){return b.login.popup(),!1}).on("click",".logout",function(){return $.ajax({url:"_doLogout",type:"post"}).done(function(a){}).fail(function(a){}).always(function(){location.reload()}),!1}),$(".norightkey").on("contextmenu",function(){return!1});var c,d=$(window),e=$("html,body"),f=$(".up-top-btn");f.length>0&&(d.on("scroll",function(a){clearTimeout(c),c=setTimeout(function(){d.scrollTop()>200?f.fadeTo(300,.6):f.fadeTo(300,0,function(){f.attr("style","display:none;")})},100)}).trigger("scroll"),f.on("click",function(a){return e.animate({scrollTop:0},300),!1}));var g=+(new Date);$.fn.docBindkeydown=function(a){var b=this;$(document).keydown(function(c){if(c.keyCode=="13"){var d=b.val()==""?"T???":b.val();a(d,$("#newhead .select").data("url"))}}),$("#newhead .searchbtn").on("click",function(){var c=b.val()==""?"T???":b.val();a(c,$("#newhead .select").data("url"))}),$(".searchtypelist").on("click",".searchtypeone",function(){$(".searchtypeone").index($(this))==0?$(this).parents(".select").data("url","_searchCampaign").find("span").text($(this).text()):$(this).parents(".select").data("url","_searchStore").find("span").text($(this).text())})},$("#searchid").docBindkeydown(function(a,c){var d=+(new Date)-g;g=+(new Date),b.tongji.eventProcess({v4:d,v3:"btn-search-box-click"}),location.href=encodeURI("_search#keywords-"+a+"/smallcategoryname-/label-/sort-0/type-/freeshipping-0/currentPage-1/pageSize-20/url-"+c)}),$(document).on("click",".SEARCH",function(){$(this).parents(".KEYWORD").length&&(location.href="_search#keywords-"+$(this).text()+"/smallcategoryname-/label-/sort-0/type-/freeshipping-0/currentPage-1/pageSize-20/url-_searchCampaign"),$(this).parents(".LABEL").length&&($(this).attr("target")=="_blank"?window.open("_search#keywords-/smallcategoryname-/label-"+$(this).text()+"/sort-0/type-/freeshipping-0/currentPage-1/pageSize-20/url-_searchCampaign"):location.href="_search#keywords-/smallcategoryname-/label-"+$(this).text()+"/sort-0/type-/freeshipping-0/currentPage-1/pageSize-20/url-_searchCampaign")}),b.lazyLoadImg()},shareH5Init:function(a,b,c,d,e,f){function j(){i=a.join("||")}function k(){var a="http://service.weibo.com/share/mobile.php?appkey="+g+"&title="+encodeURIComponent(f)+"&url="+encodeURIComponent(c)+"&pic="+encodeURIComponent(i)+"&summary="+encodeURIComponent(f);$("#shareSinaWeibo").attr("href",a).attr("target","_blank")}function l(){var b="http://sns.qzone.qq.com/cgi-bin/qzshare/cgi_qzshare_onekey?desc="+encodeURIComponent(d)+"&url="+encodeURIComponent(c)+"&pics="+encodeURIComponent(a[0])+"&summary="+encodeURIComponent(d);$("#shareQzone").attr("href",b).attr("target","_blank")}function m(){var b="http://widget.renren.com/dialog/share?title="+encodeURIComponent(e)+"&resourceUrl="+encodeURIComponent(c)+"&srcUrl="+encodeURIComponent(c)+"&thumbnail_url="+encodeURIComponent(a[0])+"&summary="+encodeURIComponent(e);$("#shareRenren").attr("href",b).attr("target","_blank")}function n(){var a=$("#qrcode"),c=$("#img-qrcode");c.length>0&&!c.attr("src")&&$.ajax({url:"_campaignQrcode",type:"post",dataType:"json",data:{id:b}}).done(function(a){a.code==200&&(c.attr("src",a.data.url),c.show())}).fail(function(a){}).always(function(){})}var g=1660997320,h=window.location.href,i="";j(),k(),l(),m(),n()},udzH5Init:function(){var a=function(a){a||(a=".head-title,#header,#footer,#mainbody"),$(a).addClass("blur2")},c=function(){$("#header,#footer,#mainbody").removeClass("blur2")},d=function(b,c){var d=$('<div id="div-shadedlayer">').on("click",function(){e(),typeof c=="function"&&c()});$(document.body).append(d),a(b)},e=function(){$("#div-shadedlayer").remove(),c()},f=function(){var a=$(".login-reg");$(".header").on("click",".menu",function(){return a.hasClass("down")?(e(),a.removeClass("down")):(d("#mainbody,#footer",function(){a.removeClass("down")}),a.addClass("down")),!1}),a.on("click","span",function(){var a=$(this),c=new Date;c.setDate(c.getDate()+1);var d=GlobalConfigUrl.domain;return d||(d=GlobalConfigUrl.indexUrl.replace("http://","")),a.hasClass("store")&&b.cookie.set("UDZH5ReturnUrl",location.href,c,"/",d),a.hasClass("ydz-login")?location.href=GlobalConfigUrl.mdomainUrl+"/_login":a.hasClass("ydz-reg")?location.href=GlobalConfigUrl.mdomainUrl+"/_register":a.hasClass("sellerhome")?(b.cookie.set("UDZH5ReturnUrl",GlobalConfigUrl.mdomainUrl+"/_sellerhome",c,"/",d),location.href=GlobalConfigUrl.mdomainUrl+"/_login"):a.hasClass("mycoupon")&&(b.cookie.set("UDZH5ReturnUrl",GlobalConfigUrl.mdomainUrl+"/_mycoupon",c,"/",d),location.href=GlobalConfigUrl.mdomainUrl+"/_login"),!1}).on("click",".logout",function(){if(confirm("?????????????????????"))return $.ajax({url:"_doLogout",type:"post"}).done(function(a){location.reload()}),!1});var c,f=$(window),g=$("html,body"),h=$(".up-top-btn");h.length>0&&(f.on("scroll",function(a){clearTimeout(c),c=setTimeout(function(){f.scrollTop()>200?h.fadeTo(300,.6):h.fadeTo(300,0,function(){h.attr("style","display:none;")})},100)}).trigger("scroll"),h.on("click",function(a){return g.animate({scrollTop:0},300),!1}))};f(),b.lazyLoadImg()}};a.udz=b,typeof define=="function"&&define.amd&&define("udz",["jquery","layer"],function(){return b})}(window),define("mycoupon",["backbone","udz"],function(){var a={type:1,template:_.template($("#couponone").html()),fnAjax:function(a,b){var c=this;$.ajax({url:a,data:b,success:function(d){if(d.code==200){a=="_exchangeCoupon"&&(udz.layer.info("?????????????????????"),location.hash="listtype1");if(a=="_queryCoupon"){b.listtype==1?($(".couponlist").removeClass("overtime"),$(".couponlist").addClass("nouse"),$(".duihuan").show()):($(".couponlist").removeClass("nouse"),$(".couponlist").addClass("overtime"),$(".duihuan").hide()),$(".seller-page-tab a.active").removeClass("active"),$(".seller-page-tab a").eq(parseInt(b.listtype)-1).addClass("active");var e="";d.data.listCoupon.length>0?($(".nohave").hide(),$.each(d.data.listCoupon,function(a,d){if(b.listtype!=1)d.url="";else if(d.type==3||d.type==4)d.url=GlobalConfigUrl.indexUrl+"/"+d.value;else if(d.type==5||d.type==6)d.url=GlobalConfigUrl.indexUrl+"/_shop?storeid="+d.value;d.starttime=udz.date.format(new Date(d.starttime),"yyyy.MM.dd"),d.endtime=udz.date.format(new Date(d.endtime),"yyyy.MM.dd"),e+=c.template(d)})):$(".nohave").show(),$(".couponlist").html(e)}}else d.code==403?location.href="_login":d.code==500?udz.layer.info(d.message):udz.layer.info("?????????????????????????????????..")},error:function(a){udz.layer.info("?????????????????????????????????..")}})}};a.router=Backbone.Router.extend({routes:{"listtype:type":"queryCoupon"},queryCoupon:function(b){a.fnAjax("_queryCoupon",{listtype:b})}}),new a.router,Backbone.history.start(),location.hash.length<9&&(location.hash="listtype1"),$(".seller-page-tab").on("click","a",function(){a.type=$(this).index()+1,location.hash="listtype"+a.type}),$(".duihuan span.btn-o8").on("click",function(){var b=$.trim($(this).parent().find("input").val());if(b==""){udz.layer.info("?????????????????????");return}if(!udz.regExp.couponcode.test(b)){udz.layer.info("????????????????????????");return}udz.regExp.couponcode.test(b)&&(a.fnAjax("_exchangeCoupon",{code:b}),location.hash="")})}),define("fansbyact",["jquery","underscore","laypage"],function(a,b,c){var d=a("#div-list-container"),e=a("#div-page-container"),f=a("#txt-search"),g=a("#span-btn-search"),h={campaignname:"",currentPage:1,pageSize:10},i=b.template('<%_.each(data.items,function(item){%>\n                        <tr class="tr-item" data-cid="<%=item.campaignid%>">\n                                <td></td>\n                                <td width="90" class="tl"><a href="<%=GlobalConfigUrl.indexUrl%>/<%=item.url%>"><img width="80" src="<%=GlobalConfigUrl.imageRootUrl%>/<%=item.pic%>.360.png" /></a></td>\n                                <td class="tl"><a href="<%=GlobalConfigUrl.indexUrl%>/<%=item.url%>"><%=item.campaignname%></a></td>\n                                <td><%=item.buyercount%></td>\n                                <td><%=item.sendtime?udz.date.format(new Date(item.sendtime.time),"yyyy-MM-dd hh:mm"):"- -"%></td>\n                                <td><%=item.pushlimit%>/1</td>\n                                <td><select><option value="0">????????????</option></select></td>\n                                <td><span class="btn1 btn-send">????????????</span></td>\n                    </tr>\n        <%});%>'),j=function(a){if(a.length==0){d.html('<tr class="tr-item"><td colspan="8"><div class="no-data">????????????</div></td></tr>');return}var b=i({data:{items:a}});d.html(b)},k=function(){var b=udz.layer.load("????????????????????????");a.ajax({url:"_pushCampaignList",data:h,type:"get",dataType:"json"}).done(function(a){a.code==200?(j(a.data.targets),l(h.currentPage,a.data.totalPage)):udz.layer.fail(a.message)}).fail(function(a){udz.layer.fail("??????????????????????????????")}).always(function(){udz.layer.ajaxClose(b)})},l=function(a,b){b>1?(e.show(),c({cont:e,pages:b,curr:a,jump:function(a,b){b||(h.currentPage=a.curr,k())}})):e.hide()};g.on("click",function(){h.campaignname=f.val(),h.currentPage=1,k()}),k();var m=function(b,c){var d=udz.layer.load();a.ajax({url:"_sendUpNewMsgByCampaign",data:{campaignid:b,msgtype:c},type:"post",dataType:"json"}).done(function(a){a.code==200?(j(a.data.targets),l(h.currentPage,a.data.totalPage)):udz.layer.fail(a.message)}).fail(function(a){udz.layer.fail("??????????????????????????????")}).always(function(){udz.layer.ajaxClose(d)})};d.on("click",".btn-send",function(){var b=a(this),c=b.closest("tr"),d=c.data("cid");return m(d,c.find("select").val()),!1})}),define("fansbygroup",["jquery","underscore","laypage"],function(a,b,c){var d=a("#div-list-container"),e=a("#div-page-container"),f=a("#txt-search"),g=a("#span-btn-search"),h={currentPage:1,pageSize:10},i=b.template('<%_.each(data.items,function(item){%>\n                        <tr class="tr-item" data-cid="<%=item.id%>">\n                                <td></td>\n                                <td class="tl"><%=item.groupname%></td>\n                                <td><%=item.usernum%></td>\n                                <td><%=item.sendtime?udz.date.format(new Date(item.sendtime.time),"yyyy-MM-dd hh:mm"):"- -"%></td>\n                                <td><%=item.pushlimit%>/1</td>\n                                <td><select><option value="0">????????????</option></select></td>\n                                <td><span class="btn1 btn-send">????????????</span></td>\n                    </tr>\n        <%});%>'),j=function(a){if(a.length==0){d.html('<tr class="tr-item"><td colspan="7"><div class="no-data">????????????</div></td></tr>');return}var b=i({data:{items:a}});d.html(b)},k=function(){var b=udz.layer.load("????????????????????????");a.ajax({url:"_pushGroupList",data:h,type:"get",dataType:"json"}).done(function(a){a.code==200?(j(a.data.targets),l(h.currentPage,a.data.totalPage)):udz.layer.fail(a.message)}).fail(function(a){udz.layer.fail("??????????????????????????????")}).always(function(){udz.layer.ajaxClose(b)})},l=function(a,b){b>1?(e.show(),c({cont:e,pages:b,curr:a,jump:function(a,b){b||(h.currentPage=a.curr,k())}})):e.hide()};k();var m=function(b,c){var d=udz.layer.load();a.ajax({url:"_sendUpNewMsgByGroup",data:{campaignid:b,msgtype:c},type:"post",dataType:"json"}).done(function(a){a.code==200?(j(a.data.targets),l(h.currentPage,a.data.totalPage)):udz.layer.fail(a.message)}).fail(function(a){udz.layer.fail("??????????????????????????????")}).always(function(){udz.layer.ajaxClose(d)})};d.on("click",".btn-send",function(){var b=a(this),c=b.closest("tr"),d=c.data("cid");return m(d,c.find("select").val()),!1})}),define("fansbyrecord",["jquery","underscore","laypage"],function(a,b,c){var d=a("#div-list-container"),e=a("#div-page-container"),f=a("#txt-search"),g=a("#span-btn-search"),h={currentPage:1,pageSize:10},i=b.template('<%_.each(data.items,function(item){%>\n                        <tr class="tr-item" data-cid="<%=item.campaignid%>">\n                                <td></td>\n                                <td><%=item.sendtime?udz.date.format(new Date(item.sendtime.time),"yyyy-MM-dd hh:mm"):"- -"%></td>\n                                    <%if (item.campaignid>0) {%>\n                                        <td width="90"><a href="<%=GlobalConfigUrl.indexUrl%>/<%=item.campaignurl%>"><img width="80" src="<%=GlobalConfigUrl.imageRootUrl%>/<%=item.campaignpic%>.360.png" /></a></td>\n                                        <td class="tl"><a href="<%=GlobalConfigUrl.indexUrl%>/<%=item.campaignurl%>"><%=item.senddesc%></a></td>\n                                    <%}else{%>\n                                        <td class="tl" colspan="2"><%=item.senddesc%></td>\n                                    <%}%>\n                                <td><%=item.buyernum%></td>\n                                <td><%=item.arrivednum%></td>\n                                <td><%=item.clicknum%></td>\n                                <td>????????????</td>\n                    </tr>\n        <%});%>'),j=function(a){if(a.length==0){d.html('<tr class="tr-item"><td colspan="8"><div class="no-data">????????????</div></td></tr>');return}var b=i({data:{items:a}});d.html(b)},k=function(){var b=udz.layer.load("????????????????????????");a.ajax({url:"_pushRecords",data:h,type:"get",dataType:"json"}).done(function(a){a.code==200?(j(a.data.records),l(h.currentPage,a.data.totalPage)):udz.layer.fail(a.message)}).fail(function(a){udz.layer.fail("??????????????????????????????")}).always(function(){udz.layer.ajaxClose(b)})},l=function(a,b){b>1?(e.show(),c({cont:e,pages:b,curr:a,jump:function(a,b){b||(h.currentPage=a.curr,k())}})):e.hide()};k()}),require.config({baseUrl:GlobalConfigUrl.requireConfigBaseUrl+"/statics/",paths:{base:"js/base.js?"+GlobalConfigUrl.staticVersion,form:"js/form.js?"+GlobalConfigUrl.staticVersion,collection:"js/collection",effect:"js/effect.js?"+GlobalConfigUrl.staticVersion,zeroclipboard:"zeroclipboard/ZeroClipboard.js?"+GlobalConfigUrl.staticVersion,jquery:"common/js/jquery-1.11.1.min",underscore:"common/js/underscore-min",udz:"common/js/udzbase.js?"+GlobalConfigUrl.staticVersion,jslinq:"common/js/JSLINQ.min.js?"+GlobalConfigUrl.staticVersion,udzshare:"common/js/udzshare.js?"+GlobalConfigUrl.staticVersion,formvalidate:"common/js/formvalidate.js?"+GlobalConfigUrl.staticVersion,placeholder:"common/js/placeholder.js?"+GlobalConfigUrl.staticVersion,layer:"common/js/layer.js?"+GlobalConfigUrl.staticVersion,sellercampaign:"my/js/sellercampaign.js?"+GlobalConfigUrl.staticVersion,sellercashbank:"my/js/sellercashbank.js?"+GlobalConfigUrl.staticVersion,sellercashalipay:"my/js/sellercashalipay.js?"+GlobalConfigUrl.staticVersion,myorder:"my/js/myorder.js?"+GlobalConfigUrl.staticVersion,profile:"my/js/profile.js?"+GlobalConfigUrl.staticVersion,alterphoto:"my/js/alterphoto.js?"+GlobalConfigUrl.staticVersion,password:"my/js/password.js?"+GlobalConfigUrl.staticVersion,orderdetail:"my/js/orderdetail.js?"+GlobalConfigUrl.staticVersion,alteraddress:"my/js/alteraddress.js?"+GlobalConfigUrl.staticVersion,alterorder:"my/js/alterorder.js?"+GlobalConfigUrl.staticVersion,recommendfriends:"my/js/recommendfriends.js?"+GlobalConfigUrl.staticVersion,focusshop:"my/js/focusshop.js?"+GlobalConfigUrl.staticVersion,salesdata:"my/js/salesdata.js?"+GlobalConfigUrl.staticVersion,WdatePicker:"My97DatePicker/WdatePicker.js?"+GlobalConfigUrl.staticVersion,echarts:"my/js/echarts.min.js?"+GlobalConfigUrl.staticVersion,backbone:"common/js/backbone-min.js?"+GlobalConfigUrl.staticVersion,mycoupon:"my/js/mycoupon.js?"+GlobalConfigUrl.staticVersion,md5:"common/js/md5.js?"+GlobalConfigUrl.staticVersion,UDZSmsValidator:"common/js/smsvalidator.js?"+GlobalConfigUrl.staticVersion,laypage:"common/js/laypage",fansbyact:"my/js/fansbyact.js?"+GlobalConfigUrl.staticVersion,fansbygroup:"my/js/fansbygroup.js?"+GlobalConfigUrl.staticVersion,fansbyrecord:"my/js/fansbyrecord.js?"+GlobalConfigUrl.staticVersion},shim:{jquery:{exports:"$"},underscore:{exports:"underscore"},base:{deps:["jquery"],exports:"base"},form:{deps:["jquery"],exports:"form"},collection:{exports:"collection"},effect:{deps:["jquery"],exports:"effect"},jslinq:{exports:"jslinq"},udzshare:{deps:["jquery"],exports:"udzshare"},formvalidate:{exports:"formvalidate"},placeholder:{exports:"placeholder"},zeroclipboard:{exports:"zeroclipboard"},sellercashbank:{exports:"sellercashbank"},backbone:{deps:["jquery","underscore"]},encrypt:{exports:"encrypt"}}});var fnPageProcess=function(a){var b={};b.sellercampaign=function(){},b.sellercashbank=function(){require(["sellercashbank"],function(){})},b.sellercashalipay=function(){require(["sellercashalipay"],function(){})},b.myorder=function(){require(["myorder"],function(){})},b.profile=function(){require(["profile"],function(){})},b.alterphoto=function(){require(["alterphoto"],function(){})},b.password=function(){require(["password"],function(){})},b.orderdetail=function(){require(["orderdetail"],function(){})},b.alteraddress=function(){require(["alteraddress"],function(){})},b.alterorder=function(){require(["alterorder"],function(){})},b.recommendfriends=function(){require(["recommendfriends"],function(){})},b.focusshop=function(){require(["focusshop"],function(){})},b.salesdata=function(){require(["salesdata"],function(){})},b.mycoupon=function(){require(["mycoupon"],function(){})},b.fansbyact=function(){require(["fansbyact"],function(){})},b.fansbygroup=function(){require(["fansbygroup"],function(){})},b.fansbyrecord=function(){require(["fansbyrecord"],function(){})},typeof b[a]=="function"&&b[a]()};require(["jquery","udz"],function(a,b){var c=[{name:"salemanage",url:["/_sellerCampaign","/_sellerCashList","/_sellerCashBank","/_sellerCashAlipay"]},{name:"myorder",url:["/_myorder","/_orderdetail"]},{name:"recommendfriends",url:["/_recommendfriends"]},{name:"profile",url:["/_profile"]},{name:"password",url:["/_password"]},{name:"focusshop",url:["/_focusshop"]},{name:"salesdata",url:["/_salesdata"]},{name:"mycoupon",url:["/_mycoupon"]},{name:"fansmaintain",url:["/_fansbyact","/_fansbygroup","/_fansbyrecord"]}],d=function(){sPageFlagName=document.body.getAttribute("data-pagename");var d=location.href;for(var e=0;e<c.length;e++)for(var f=0;f<c[e].url.length;f++)if(c[e].url[f]&&d.indexOf(c[e].url[f])>-1){a("a[data-menuname="+c[e].name.toString()+"]").addClass("active");break}b.udzInit(),fnPageProcess(sPageFlagName),b.tongji.tongjiProcess()};d()}),define("my",function(){})